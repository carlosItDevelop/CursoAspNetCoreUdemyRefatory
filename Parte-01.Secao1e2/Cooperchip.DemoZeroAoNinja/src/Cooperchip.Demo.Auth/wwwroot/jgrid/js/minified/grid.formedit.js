!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.base","./grid.common"],e):e(jQuery)}(function(Z){"use strict";var $={};Z.jgrid.extend({editGridRow:function(X,Y){var e=Z.jgrid.getRegional(this[0],"edit"),t=this[0].p.styleUI,J=Z.jgrid.styleUI[t].formedit,K=Z.jgrid.styleUI[t].common;return Y=Z.extend(!0,{top:0,left:0,width:"500",datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:K.overlay,removemodal:!0,form:"edit",template:null,focusField:!0,editselected:!1,html5Check:!1,buttons:[]},e,Y||{}),$[Z(this)[0].p.id]=Y,this.each(function(){var p=this;if(p.grid&&X){p.p.savedData={};var u,h,i,e,g=p.p.id,m="FrmGrid_"+g,t="TblGrid_"+g,f="#"+Z.jgrid.jqID(t),j={themodal:"editmod"+g,modalhead:"edithd"+g,modalcontent:"editcnt"+g,scrollelm:m},a=!0,d=1,r=0,o="string"==typeof $[p.p.id].template&&0<$[p.p.id].template.length,v=Z.jgrid.getRegional(this,"errors"),M=($[p.p.id].styleUI=p.p.styleUI||"jQueryUI",Z.jgrid.isMobile()&&($[p.p.id].resize=!1),"new"===X?(X="_empty",h="add",Y.caption=$[p.p.id].addCaption):(Y.caption=$[p.p.id].editCaption,h="edit"),Y.recreateForm||Z(p).data("formProp")&&Z.extend($[Z(this)[0].p.id],Z(p).data("formProp")),!0),n=(Y.checkOnUpdate&&Y.jqModal&&!Y.modal&&(M=!1),isNaN($[Z(this)[0].p.id].dataheight)?$[Z(this)[0].p.id].dataheight:$[Z(this)[0].p.id].dataheight+"px"),l=isNaN($[Z(this)[0].p.id].datawidth)?$[Z(this)[0].p.id].datawidth:$[Z(this)[0].p.id].datawidth+"px",b=Z("<form name='FormPost' id='"+m+"' class='FormGrid' onSubmit='return false;' style='width:"+l+";height:"+n+";'></form>").data("disabled",!1),s=o?(l=$[Z(this)[0].p.id].template,n="",i=n="string"==typeof l?l.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(e,t){return'<span id="'+t+'" ></span>'}):n,f):(i=Z("<table id='"+t+"' class='EditTable ui-common-table'><tbody></tbody></table>"),f+"_2"),m="#"+Z.jgrid.jqID(m);if(Z(b).append("<div class='FormError "+K.error+"' style='display:none;'></div>"),Z(b).append("<div class='tinfo topinfo'>"+$[p.p.id].topinfo+"</div>"),Z(p.p.colModel).each(function(){var e=this.formoptions;d=Math.max(d,e&&e.colpos||0),r=Math.max(r,e&&e.rowpos||0)}),Z(b).append(i),!1!==(a=(a=void 0===(a=Z(p).triggerHandler("jqGridAddEditBeforeInitData",[b,h]))?!0:a)&&Z.jgrid.isFunction($[p.p.id].beforeInitData)?$[p.p.id].beforeInitData.call(p,b,h):a)){if("_empty"!==X&&void 0!==p.p.savedRow&&0<p.p.savedRow.length&&Z.jgrid.isFunction(Z.fn.jqGrid.restoreRow))for(e=0;e<p.p.savedRow.length;e++)if(p.p.savedRow[e].id===X){Z(p).jqGrid("restoreRow",X);break}for(var c,w,D,y,B,q,x,_=X,I=p,k=i,C=d,F=0,G=!1,R="",U=1;U<=C;U++)R+="<td class='CaptionTD'></td><td class='DataTD'></td>";"_empty"!==_&&(G=Z(I).jqGrid("getInd",_)),Z(I.p.colModel).each(function(t){if(c=this.name,w=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden,B=w?"style='display:none'":"","cb"!==c&&"subgrid"!==c&&!0===this.editable&&"rn"!==c&&"sc"!==c){if(!1===G)y="";else if(c===I.p.ExpandColumn&&!0===I.p.treeGrid)y=Z("td[role='gridcell']",I.rows[G]).eq(t).text();else{try{y=Z.unformat.call(I,Z("td[role='gridcell']",I.rows[G]).eq(t),{rowId:_,colModel:this},t)}catch(e){y=this.edittype&&"textarea"===this.edittype?Z("td[role='gridcell']",I.rows[G]).eq(t).text():Z("td[role='gridcell']",I.rows[G]).eq(t).html()}y&&"&nbsp;"!==y&&"&#160;"!==y&&(1!==y.length||160!==y.charCodeAt(0))||(y="")}var e,i=Z.extend({},this.editoptions||{},{id:c,name:c,rowId:_,oper:h,module:"form",checkUpdate:$[p.p.id].checkOnSubmit||$[p.p.id].checkOnUpdate}),a=Z.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),d=parseInt(a.rowpos,10)||F+1,r=parseInt(2*(parseInt(a.colpos,10)||1),10);"_empty"===_&&i.defaultValue&&(y=Z.jgrid.isFunction(i.defaultValue)?i.defaultValue.call(p):i.defaultValue),this.edittype||(this.edittype="text"),p.p.autoencode&&(y=Z.jgrid.htmlDecode(y)),q=Z.jgrid.createEl.call(p,this.edittype,i,y,!1,Z.extend({},Z.jgrid.ajaxOptions,I.p.ajaxSelectOptions||{})),"select"===this.edittype&&(y=Z(q).val(),"select-multiple"===Z(q).get(0).type)&&(y=y&&y.join(",")),"checkbox"===this.edittype&&(y=Z(q).is(":checked")?Z(q).val():Z(q).attr("offval")),Z(q).addClass("FormElement"),"select"===this.edittype?Z(q).addClass(J.selectClass):-1<Z.inArray(this.edittype,["text","textarea","password","color","date","datetime","datetime-local","email","month","number","range","search","tel","time","url","week"])&&Z(q).addClass(J.inputClass),x=!0,o?(e=Z(b).find("#"+c)).length?e.replaceWith(q):x=!1:(D=Z(k).find("tr[rowpos="+d+"]"),a.rowabove&&(e=Z("<tr><td class='contentinfo' colspan='"+2*C+"'>"+a.rowcontent+"</td></tr>"),Z(k).append(e),e[0].rp=d),0===D.length&&(D=Z(1<C?"<tr rowpos='"+d+"'></tr>":"<tr "+B+" rowpos='"+d+"'></tr>").addClass("FormData").attr("id","tr_"+c),Z(D).append(R),Z(k).append(D),D[0].rp=d),Z("td",D[0]).eq(r-2).html("<label for='"+c+"'>"+(void 0===a.label?I.p.colNames[t]:a.label)+"</label>"),Z("td",D[0]).eq(r-1).append(a.elmprefix).append(q).append(a.elmsuffix),1<C&&w&&(Z("td",D[0]).eq(r-2).hide(),Z("td",D[0]).eq(r-1).hide())),($[p.p.id].checkOnSubmit||$[p.p.id].checkOnUpdate)&&x&&(p.p.savedData[c]=y),"custom"===this.edittype&&Z.jgrid.isFunction(i.custom_value)&&i.custom_value.call(p,Z("#"+c,q),"set",y),Z.jgrid.bindEv.call(p,q,i),F,F++}}),0<F&&((o?(P="<div class='FormData' style='display:none'><input class='FormElement' id='id_g' type='text' name='"+I.p.id+"_id' value='"+_+"'/>",Z(b)):((P=Z("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*C-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+I.p.id+"_id' value='"+_+"'/></td></tr>"))[0].rp=F+999,Z(k))).append(P),$[p.p.id].checkOnSubmit||$[p.p.id].checkOnUpdate)&&(p.p.savedData[I.p.id+"_id"]=_);var O,l="rtl"===p.p.direction,n="<a id='"+(l?"nData":"pData")+"' class='fm-button "+K.button+"'><span class='"+K.icon_base+" "+J.icon_prev+"'></span></a>",a="<a id='"+(l?"pData":"nData")+"' class='fm-button "+K.button+"'><span class='"+K.icon_base+" "+J.icon_next+"'></span></a>",P="<a id='sData' class='fm-button "+K.button+"'>"+Y.bSubmit+"</a>",S="<a id='cData' class='fm-button "+K.button+"'>"+Y.bCancel+"</a>",E=Array.isArray($[p.p.id].buttons)?Z.jgrid.buildButtons($[p.p.id].buttons,P+S,K):P+S,E="<table style='height:auto' class='EditTable ui-common-table' id='"+t+"_2'><tbody><tr><td colspan='2'><hr class='"+K.content+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(l?a+n:n+a)+"</td><td class='EditButton'>"+E+"</td></tr>",T=(E+="</tbody></table>",0<r&&(O=[],Z.each(Z(i)[0].rows,function(e,t){O[e]=t}),O.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),Z.each(O,function(e,t){Z("tbody",i).append(t)})),Y.gbox="#gbox_"+Z.jgrid.jqID(g),!1),t=(!0===Y.closeOnEscape&&(Y.closeOnEscape=!1,T=!0),n=o?(Z(b).find("#pData").replaceWith(n),Z(b).find("#nData").replaceWith(a),Z(b).find("#sData").replaceWith(P),Z(b).find("#cData").replaceWith(S),Z("<div id="+t+"></div>").append(b)):Z("<div></div>").append(b).append(E),Z(b).append("<div class='binfo topinfo bottominfo'>"+$[p.p.id].bottominfo+"</div>"),Z(".ui-jqgrid").css("font-size")||"11px"),t=(Z.jgrid.createModal(j,n,$[Z(this)[0].p.id],"#gview_"+Z.jgrid.jqID(p.p.id),Z("#gbox_"+Z.jgrid.jqID(p.p.id))[0],null,{"font-size":t}),l&&(Z("#pData, #nData",f+"_2").css("float","right"),Z(".EditButton",f+"_2").css("text-align","left")),$[p.p.id].topinfo&&Z(".tinfo",m).show(),$[p.p.id].bottominfo&&Z(".binfo",m).show(),n=null,Z("#"+Z.jgrid.jqID(j.themodal)).keydown(function(e){var t=e.target;return!0!==Z(m).data("disabled")&&(!0===$[p.p.id].savekey[0]&&e.which===$[p.p.id].savekey[1]&&"TEXTAREA"!==t.tagName?(Z("#sData",f+"_2").trigger("click"),!1):27===e.which?(A()&&T&&Z.jgrid.hideModal("#"+Z.jgrid.jqID(j.themodal),{gb:Y.gbox,jqm:Y.jqModal,onClose:$[p.p.id].onClose,removemodal:$[p.p.id].removemodal,formprop:!$[p.p.id].recreateForm,form:$[p.p.id].form}),!1):!0===$[p.p.id].navkeys[0]?"_empty"===Z("#id_g",f).val()||(e.which===$[p.p.id].navkeys[1]?(Z("#pData",s).trigger("click"),!1):e.which===$[p.p.id].navkeys[2]?(Z("#nData",s).trigger("click"),!1):void 0):void 0)}),Y.checkOnUpdate&&(Z("a.ui-jqdialog-titlebar-close span","#"+Z.jgrid.jqID(j.themodal)).removeClass("jqmClose"),Z("a.ui-jqdialog-titlebar-close","#"+Z.jgrid.jqID(j.themodal)).off("click").click(function(){return A()&&Z.jgrid.hideModal("#"+Z.jgrid.jqID(j.themodal),{gb:"#gbox_"+Z.jgrid.jqID(g),jqm:Y.jqModal,onClose:$[p.p.id].onClose,removemodal:$[p.p.id].removemodal,formprop:!$[p.p.id].recreateForm,form:$[p.p.id].form}),!1})),Y.saveicon=Z.extend([!0,"left",J.icon_save],Y.saveicon),Y.closeicon=Z.extend([!0,"left",J.icon_close],Y.closeicon),!0===Y.saveicon[0]&&Z("#sData",s).addClass("right"===Y.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+K.icon_base+" "+Y.saveicon[2]+"'></span>"),!0===Y.closeicon[0]&&Z("#cData",s).addClass("right"===Y.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+K.icon_base+" "+Y.closeicon[2]+"'></span>"),($[p.p.id].checkOnSubmit||$[p.p.id].checkOnUpdate)&&(P="<a id='sNew' class='fm-button "+K.button+"' style='z-index:1002'>"+Y.bYes+"</a>",a="<a id='nNew' class='fm-button "+K.button+"' style='z-index:1002;margin-left:5px'>"+Y.bNo+"</a>",S="<a id='cNew' class='fm-button "+K.button+"' style='z-index:1002;margin-left:5px;'>"+Y.bExit+"</a>",E=Y.zIndex||999,E++,Z("#"+j.themodal).append("<div class='"+Y.overlayClass+" jqgrid-overlay confirm' style='z-index:"+E+";display:none;position:absolute;'>&#160;</div><div class='confirm ui-jqconfirm "+K.content+"' style='z-index:"+(1+E)+"'>"+Y.saveData+"<br/><br/>"+P+a+S+"</div>"),Z("#sNew","#"+Z.jgrid.jqID(j.themodal)).click(function(){return H(),Z(m).data("disabled",!1),Z(".confirm","#"+Z.jgrid.jqID(j.themodal)).hide(),!1}),Z("#nNew","#"+Z.jgrid.jqID(j.themodal)).click(function(){return Z(".confirm","#"+Z.jgrid.jqID(j.themodal)).hide(),Z(m).data("disabled",!1),setTimeout(function(){Z(":input:visible",m)[0].focus()},0),!1}),Z("#cNew","#"+Z.jgrid.jqID(j.themodal)).click(function(){return Z(".confirm","#"+Z.jgrid.jqID(j.themodal)).hide(),Z(m).data("disabled",!1),Z.jgrid.hideModal("#"+Z.jgrid.jqID(j.themodal),{gb:"#gbox_"+Z.jgrid.jqID(g),jqm:Y.jqModal,onClose:$[p.p.id].onClose,removemodal:$[p.p.id].removemodal,formprop:!$[p.p.id].recreateForm,form:$[p.p.id].form}),!1})),Z(p).triggerHandler("jqGridAddEditInitializeForm",[Z(m),h]),Z.jgrid.isFunction($[p.p.id].onInitializeForm)&&$[p.p.id].onInitializeForm.call(p,Z(m),h),"_empty"!==X&&$[p.p.id].viewPagerButtons?Z("#pData,#nData",s).show():Z("#pData,#nData",s).hide(),Z(p).triggerHandler("jqGridAddEditBeforeShowForm",[Z(m),h]),Z.jgrid.isFunction($[p.p.id].beforeShowForm)&&$[p.p.id].beforeShowForm.call(p,Z(m),h),Q(),Z("#"+Z.jgrid.jqID(j.themodal)).data("onClose",$[p.p.id].onClose),Z.jgrid.viewModal("#"+Z.jgrid.jqID(j.themodal),{gbox:"#gbox_"+Z.jgrid.jqID(g),jqm:Y.jqModal,overlay:Y.overlay,modal:Y.modal,overlayClass:Y.overlayClass,focusField:Y.focusField,onHide:function(e){var t=Z.jgrid.floatNum(Z("#editmod"+g)[0].style.width),i="rtl"===Z("#gbox_"+Z.jgrid.jqID(g)).attr("dir"),a=Z("#editmod"+g)[0].style.height,a=["100%","auto"].includes(a)?a:Z.jgrid.floatNum(a,200);Z(p).data("formProp",{top:Z.jgrid.floatNum(Z(e.w).css("top")),left:i?Z("#gbox_"+Z.jgrid.jqID(g)).outerWidth()-t-parseFloat(Z(e.w).css("left"))+12:parseFloat(Z(e.w).css("left")),width:t,height:a,dataheight:Z(m).height(),datawidth:Z(m).width()}),e.w.remove(),e.o&&e.o.remove()}}),M||Z("."+Z.jgrid.jqID(Y.overlayClass)).click(function(){return A()&&Z.jgrid.hideModal("#"+Z.jgrid.jqID(j.themodal),{gb:"#gbox_"+Z.jgrid.jqID(g),jqm:Y.jqModal,onClose:$[p.p.id].onClose,removemodal:$[p.p.id].removemodal,formprop:!$[p.p.id].recreateForm,form:$[p.p.id].form}),!1}),Z(".fm-button","#"+Z.jgrid.jqID(j.themodal)).hover(function(){Z(this).addClass(K.hover)},function(){Z(this).removeClass(K.hover)}),Z("#sData",s).click(function(){return u={},Z(".FormError",m).hide(),N(),"_empty"!==u[p.p.id+"_id"]&&!0===Y.checkOnSubmit&&V(u,p.p.savedData)?(Z(m).data("disabled",!0),Z(".confirm","#"+Z.jgrid.jqID(j.themodal)).show()):H(),!1}),Z("#cData",s).click(function(){return A()&&Z.jgrid.hideModal("#"+Z.jgrid.jqID(j.themodal),{gb:"#gbox_"+Z.jgrid.jqID(g),jqm:Y.jqModal,onClose:$[p.p.id].onClose,removemodal:$[p.p.id].removemodal,formprop:!$[p.p.id].recreateForm,form:$[p.p.id].form}),!1}),Z(s).find("[data-index]").each(function(){var t=parseInt(Z(this).attr("data-index"),10);0<=t&&Y.buttons[t].hasOwnProperty("click")&&Z(this).on("click",function(e){Y.buttons[t].click.call(p,Z(m)[0],$[p.p.id],e)})}),Z("#nData",s).click(function(){if(A()){Z(".FormError",m).hide();var e,t=L();if(t[0]=parseInt(t[0],10),-1!==t[0]&&t[1][t[0]+1]){if(Z(p).triggerHandler("jqGridAddEditClickPgButtons",["next",Z(m),t[1][t[0]]]),Z.jgrid.isFunction(Y.onclickPgButtons)&&void 0!==(e=Y.onclickPgButtons.call(p,"next",Z(m),t[1][t[0]]))&&!1===e)return!1;if(Z("#"+Z.jgrid.jqID(t[1][t[0]+1])).hasClass(K.disabled))return!1;z(t[1][t[0]+1],p,m),p.p.multiselect&&$[p.p.id].editselected||Z(p).jqGrid("setSelection",t[1][t[0]+1]),Z(p).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",Z(m),t[1][t[0]]]),Z.jgrid.isFunction(Y.afterclickPgButtons)&&Y.afterclickPgButtons.call(p,"next",Z(m),t[1][t[0]+1]),Q(),W(t[0]+1,t)}}return!1}),Z("#pData",s).click(function(){if(A()){Z(".FormError",m).hide();var e,t=L();if(-1!==t[0]&&t[1][t[0]-1]){if(Z(p).triggerHandler("jqGridAddEditClickPgButtons",["prev",Z(m),t[1][t[0]]]),Z.jgrid.isFunction(Y.onclickPgButtons)&&void 0!==(e=Y.onclickPgButtons.call(p,"prev",Z(m),t[1][t[0]]))&&!1===e)return!1;if(Z("#"+Z.jgrid.jqID(t[1][t[0]-1])).hasClass(K.disabled))return!1;z(t[1][t[0]-1],p,m),p.p.multiselect&&$[p.p.id].editselected||Z(p).jqGrid("setSelection",t[1][t[0]-1]),Z(p).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",Z(m),t[1][t[0]]]),Z.jgrid.isFunction(Y.afterclickPgButtons)&&Y.afterclickPgButtons.call(p,"prev",Z(m),t[1][t[0]-1]),Q(),W(t[0]-1,t)}}return!1}),Z(p).triggerHandler("jqGridAddEditAfterShowForm",[Z(m),h]),Z.jgrid.isFunction($[p.p.id].afterShowForm)&&$[p.p.id].afterShowForm.call(p,Z(m),h),L());W(t[0],t)}}function N(){var e,t,a={};for(e in Z(f).find(".FormElement").each(function(){var e,t=Z(".customelement",this);if(t.length){var t=t[0],i=Z(t).attr("name");Z.each(p.p.colModel,function(){if(this.name===i&&this.editoptions&&Z.jgrid.isFunction(this.editoptions.custom_value)){try{if(u[i]=this.editoptions.custom_value.call(p,Z("#"+Z.jgrid.jqID(i),f),"get"),void 0===u[i])throw"e1"}catch(e){"e1"===e?Z.jgrid.info_dialog(v.errcap,"function 'custom_value' "+$[Z(this)[0]].p.msg.novalue,$[Z(this)[0]].p.bClose,{styleUI:$[Z(this)[0]].p.styleUI}):Z.jgrid.info_dialog(v.errcap,e.message,$[Z(this)[0]].p.bClose,{styleUI:$[Z(this)[0]].p.styleUI})}return!0}})}else{switch(Z(this).get(0).type){case"checkbox":Z(this).is(":checked")?u[this.name]=Z(this).val():(e=Z(this).attr("offval"),u[this.name]=e);break;case"select-one":u[this.name]=Z(this).val();break;case"select-multiple":u[this.name]=Z(this).val(),u[this.name]=u[this.name]?u[this.name].join(","):"";break;case"radio":if(a.hasOwnProperty(this.name))return!0;a[this.name]=void 0===Z(this).attr("offval")?"off":Z(this).attr("offval");break;default:u[this.name]=Z(this).val()}p.p.autoencode&&(u[this.name]=Z.jgrid.htmlEncode(u[this.name]))}}),a)a.hasOwnProperty(e)&&(t=Z('input[name="'+e+'"]:checked',f).val(),u[e]=void 0!==t?t:a[e],p.p.autoencode)&&(u[e]=Z.jgrid.htmlEncode(u[e]))}function z(i,a,d){var r,o,e,t,n,l,s=0,c=(($[p.p.id].checkOnSubmit||$[p.p.id].checkOnUpdate)&&(p.p.savedData={},p.p.savedData[a.p.id+"_id"]=i),a.p.colModel);"_empty"===i?(Z(c).each(function(){r=this.name,n=Z.extend({},this.editoptions||{}),(e=Z("#"+Z.jgrid.jqID(r),d))&&e.length&&null!==e[0]&&(t="","custom"===this.edittype&&Z.jgrid.isFunction(n.custom_value)?n.custom_value.call(p,Z("#"+r,d),"set",t):n.defaultValue?(t=Z.jgrid.isFunction(n.defaultValue)?n.defaultValue.call(p):n.defaultValue,"checkbox"===e[0].type?(n=t.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==n?(e[0].checked=!0,e[0].defaultChecked=!0,e[0].value=t):(e[0].checked=!1,e[0].defaultChecked=!1):e.val(t)):"checkbox"===e[0].type?(e[0].checked=!1,e[0].defaultChecked=!1,t=Z(e).attr("offval")):e[0].type&&"select"===e[0].type.substr(0,6)?e[0].selectedIndex=0:e.val(t),!0!==$[p.p.id].checkOnSubmit&&!$[p.p.id].checkOnUpdate||(p.p.savedData[r]=t))}),Z("#id_g",d).val(i)):(l=Z(a).jqGrid("getInd",i,!0))&&(Z('td[role="gridcell"]',l).each(function(t){if("cb"!==(r=c[t].name)&&"subgrid"!==r&&"rn"!==r&&!0===c[t].editable&&"sc"!==r){if(r===a.p.ExpandColumn&&!0===a.p.treeGrid)o=Z(this).text();else try{o=Z.unformat.call(a,Z(this),{rowId:i,colModel:c[t]},t)}catch(e){o="textarea"===c[t].edittype?Z(this).text():Z(this).html()}switch(p.p.autoencode&&(o=Z.jgrid.htmlDecode(o)),!0!==$[p.p.id].checkOnSubmit&&!$[p.p.id].checkOnUpdate||(p.p.savedData[r]=o),r=Z.jgrid.jqID(r),c[t].edittype){case"select":var e=o.split(","),e=Z.map(e,function(e){return Z.jgrid.trim(e)});Z("#"+r+" option",d).each(function(){!(c[t].editoptions.multiple||Z.jgrid.trim(o)!==Z.jgrid.trim(Z(this).text())&&e[0]!==Z.jgrid.trim(Z(this).text())&&e[0]!==Z.jgrid.trim(Z(this).val()))||c[t].editoptions.multiple&&(-1<Z.inArray(Z.jgrid.trim(Z(this).text()),e)||-1<Z.inArray(Z.jgrid.trim(Z(this).val()),e))?this.selected=!0:this.selected=!1}),!0!==$[p.p.id].checkOnSubmit&&!$[p.p.id].checkOnUpdate||(o=Z("#"+r,d).val(),c[t].editoptions.multiple&&(o=o.join(",")),p.p.savedData[r]=o);break;case"checkbox":o=String(o),c[t].editoptions&&c[t].editoptions.value?c[t].editoptions.value.split(":")[0]===o?Z("#"+r,d)[p.p.useProp?"prop":"attr"]({checked:!0,defaultChecked:!0}):Z("#"+r,d)[p.p.useProp?"prop":"attr"]({checked:!1,defaultChecked:!1}):(o=o.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==o?(Z("#"+r,d)[p.p.useProp?"prop":"attr"]("checked",!0),Z("#"+r,d)[p.p.useProp?"prop":"attr"]("defaultChecked",!0)):(Z("#"+r,d)[p.p.useProp?"prop":"attr"]("checked",!1),Z("#"+r,d)[p.p.useProp?"prop":"attr"]("defaultChecked",!1)),!0!==$[p.p.id].checkOnSubmit&&!$[p.p.id].checkOnUpdate||(o=Z("#"+r,d).is(":checked")?Z("#"+r,d).val():Z("#"+r,d).attr("offval"),p.p.savedData[r]=o);break;case"custom":try{if(!c[t].editoptions||!Z.jgrid.isFunction(c[t].editoptions.custom_value))throw"e1";c[t].editoptions.custom_value.call(p,Z("#"+r,d),"set",o)}catch(e){"e1"===e?Z.jgrid.info_dialog(v.errcap,"function 'custom_value' "+$[Z(this)[0]].p.msg.nodefined,Z.rp_ge[Z(this)[0]].p.bClose,{styleUI:$[Z(this)[0]].p.styleUI}):Z.jgrid.info_dialog(v.errcap,e.message,Z.rp_ge[Z(this)[0]].p.bClose,{styleUI:$[Z(this)[0]].p.styleUI})}break;default:("&nbsp;"===o||"&#160;"===o||1===o.length&&160===o.charCodeAt(0))&&(o=""),Z("#"+r,d).val(o)}s++}}),0<s)&&(Z("#id_g",f).val(i),!0!==$[p.p.id].checkOnSubmit&&!$[p.p.id].checkOnUpdate||(p.p.savedData[a.p.id+"_id"]=i))}function H(){var a,d,r,e,t,o,i,n=[!0,"",""],l={},s=p.p.prmNames,c=Z(p).triggerHandler("jqGridAddEditBeforeCheckValues",[u,Z(m),h]);if(c&&"object"==typeof c&&(u=c),Z.jgrid.isFunction($[p.p.id].beforeCheckValues)&&(c=$[p.p.id].beforeCheckValues.call(p,u,Z(m),h))&&"object"==typeof c&&(u=c),!$[p.p.id].html5Check||Z.jgrid.validateForm(b[0])){for(e in u)if(u.hasOwnProperty(e)&&!1===(n=Z.jgrid.checkValues.call(p,u[e],e))[0])break;if(Z.each(p.p.colModel,function(e,t){t.editoptions&&!0===t.editoptions.NullIfEmpty&&u.hasOwnProperty(t.name)&&""===u[t.name]&&(u[t.name]="null")}),(n=n[0]&&(void 0===(l=Z(p).triggerHandler("jqGridAddEditClickSubmit",[$[p.p.id],u,h]))&&Z.jgrid.isFunction($[p.p.id].onclickSubmit)&&(l=$[p.p.id].onclickSubmit.call(p,$[p.p.id],u,h)||{}),(n=void 0===(n=Z(p).triggerHandler("jqGridAddEditBeforeSubmit",[u,Z(m),h]))?[!0,"",""]:n)[0])&&Z.jgrid.isFunction($[p.p.id].beforeSubmit)?$[p.p.id].beforeSubmit.call(p,u,Z(m),h):n)[0]&&!$[p.p.id].processing){if($[p.p.id].processing=!0,Z("#sData",f+"_2").addClass(K.active),c=$[p.p.id].url||Z(p).jqGrid("getGridParam","editurl"),r=s.oper,d="clientArray"===c?p.p.keyName:s.id,u[r]="_empty"===Z.jgrid.trim(u[p.p.id+"_id"])?s.addoper:s.editoper,(u[r]!==s.addoper||void 0===u[d])&&(u[d]=u[p.p.id+"_id"]),delete u[p.p.id+"_id"],u=Z.extend(u,$[p.p.id].editData,l),!0===p.p.treeGrid)for(t in u[r]===s.addoper&&(o=Z(p).jqGrid("getGridParam","selrow"),l="adjacency"===p.p.treeGridModel?p.p.treeReader.parent_id_field:"parent_id",u[l]=o),p.p.treeReader)p.p.treeReader.hasOwnProperty(t)&&(i=p.p.treeReader[t],!u.hasOwnProperty(i)||u[r]===s.addoper&&"parent_id_field"===t||delete u[i]);u[d]=Z.jgrid.stripPref(p.p.idPrefix,u[d]);l=Z.extend({url:c,type:$[p.p.id].mtype,data:Z.jgrid.isFunction($[p.p.id].serializeEditData)?$[p.p.id].serializeEditData.call(p,u):u,complete:function(e,t){if(Z("#sData",f+"_2").removeClass(K.active),u[d]=p.p.idPrefix+u[d],300<=e.status&&304!==e.status?(n[0]=!1,n[1]=Z(p).triggerHandler("jqGridAddEditErrorTextFormat",[e,h]),Z.jgrid.isFunction($[p.p.id].errorTextFormat)?n[1]=$[p.p.id].errorTextFormat.call(p,e,h):n[1]=t+" Status: '"+e.statusText+"'. Error code: "+e.status):(n=void 0===(n=Z(p).triggerHandler("jqGridAddEditAfterSubmit",[e,u,h]))?[!0,"",""]:n)[0]&&Z.jgrid.isFunction($[p.p.id].afterSubmit)&&(n=$[p.p.id].afterSubmit.call(p,e,u,h)),!1===n[0])Z(".FormError",m).html(n[1]),Z(".FormError",m).show();else if(p.p.autoencode&&Z.each(u,function(e,t){u[e]=Z.jgrid.htmlDecode(t)}),u[r]===s.addoper?(n[2]||(n[2]=Z.jgrid.randId()),null==u[d]||u[d]===p.p.idPrefix+"_empty"||""===u[d]?u[d]=n[2]:n[2]=u[d],$[p.p.id].reloadAfterSubmit?Z(p).trigger("reloadGrid"):!0===p.p.treeGrid?Z(p).jqGrid("addChildNode",n[2],o,u):Z(p).jqGrid("addRowData",n[2],u,Y.addedrow),$[p.p.id].closeAfterAdd?(!0!==p.p.treeGrid&&Z(p).jqGrid("setSelection",n[2]),Z.jgrid.hideModal("#"+Z.jgrid.jqID(j.themodal),{gb:"#gbox_"+Z.jgrid.jqID(g),jqm:Y.jqModal,onClose:$[p.p.id].onClose,removemodal:$[p.p.id].removemodal,formprop:!$[p.p.id].recreateForm,form:$[p.p.id].form})):$[p.p.id].clearAfterAdd&&z("_empty",p,m)):($[p.p.id].reloadAfterSubmit?(Z(p).trigger("reloadGrid"),$[p.p.id].closeAfterEdit||setTimeout(function(){Z(p).jqGrid("setSelection",u[d])},1e3)):!0===p.p.treeGrid?Z(p).jqGrid("setTreeRow",u[d],u):Z(p).jqGrid("setRowData",u[d],u),$[p.p.id].closeAfterEdit&&Z.jgrid.hideModal("#"+Z.jgrid.jqID(j.themodal),{gb:"#gbox_"+Z.jgrid.jqID(g),jqm:Y.jqModal,onClose:$[p.p.id].onClose,removemodal:$[p.p.id].removemodal,formprop:!$[p.p.id].recreateForm,form:$[p.p.id].form})),(Z.jgrid.isFunction($[p.p.id].afterComplete)||Object.prototype.hasOwnProperty.call(Z._data(Z(p)[0],"events"),"jqGridAddEditAfterComplete"))&&(a=e,setTimeout(function(){Z(p).triggerHandler("jqGridAddEditAfterComplete",[a,u,Z(m),h]);try{$[p.p.id].afterComplete.call(p,a,u,Z(m),h)}catch(e){}a=null},500)),($[p.p.id].checkOnSubmit||$[p.p.id].checkOnUpdate)&&(Z(m).data("disabled",!1),"_empty"!==p.p.savedData[p.p.id+"_id"]))for(var i in p.p.savedData)p.p.savedData.hasOwnProperty(i)&&u[i]&&(p.p.savedData[i]=u[i]);$[p.p.id].processing=!1;try{Z(":input:visible",m)[0].focus()}catch(e){}}},Z.jgrid.ajaxOptions,$[p.p.id].ajaxEditOptions);l.url||$[p.p.id].useDataProxy||(Z.jgrid.isFunction(p.p.dataProxy)?$[p.p.id].useDataProxy=!0:(n[0]=!1,n[1]+=" "+v.nourl)),n[0]&&($[p.p.id].useDataProxy?!1===(c=void 0===(c=p.p.dataProxy.call(p,l,"set_"+p.p.id))?[!0,""]:c)[0]?(n[0]=!1,n[1]=c[1]||"Error deleting the selected row!"):(l.data.oper===s.addoper&&$[p.p.id].closeAfterAdd&&Z.jgrid.hideModal("#"+Z.jgrid.jqID(j.themodal),{gb:"#gbox_"+Z.jgrid.jqID(g),jqm:Y.jqModal,onClose:$[p.p.id].onClose,removemodal:$[p.p.id].removemodal,formprop:!$[p.p.id].recreateForm,form:$[p.p.id].form}),l.data.oper===s.editoper&&$[p.p.id].closeAfterEdit&&Z.jgrid.hideModal("#"+Z.jgrid.jqID(j.themodal),{gb:"#gbox_"+Z.jgrid.jqID(g),jqm:Y.jqModal,onClose:$[p.p.id].onClose,removemodal:$[p.p.id].removemodal,formprop:!$[p.p.id].recreateForm,form:$[p.p.id].form})):"clientArray"===l.url?($[p.p.id].reloadAfterSubmit=!1,u=l.data,l.complete({status:200,statusText:""},"")):Z.ajax(l))}!1===n[0]&&(Z(m).scrollTop(0),Z(".FormError",m).html(n[1]),Z(".FormError",m).show())}}function V(e,t){var i,a=!1;if(!(a=!(Z.isPlainObject(e)&&Z.isPlainObject(t)&&Object.getOwnPropertyNames(e).length===Object.getOwnPropertyNames(t).length)))for(i in t)if(t.hasOwnProperty(i)){if(!e.hasOwnProperty(i)){a=!0;break}if(e[i]!==t[i]){a=!0;break}}return a}function A(){var e=!0;return Z(".FormError",m).hide(),$[p.p.id].checkOnUpdate&&(u={},N(),V(u,p.p.savedData))&&(Z(m).data("disabled",!0),Z(".confirm","#"+j.themodal).show(),e=!1),e}function W(e,t){var i=t[1].length-1;0===e||void 0!==t[1][e-1]&&Z("#"+Z.jgrid.jqID(t[1][e-1])).hasClass(K.disabled)?Z("#pData",s).addClass(K.disabled):Z("#pData",s).removeClass(K.disabled),e===i||void 0!==t[1][e+1]&&Z("#"+Z.jgrid.jqID(t[1][e+1])).hasClass(K.disabled)?Z("#nData",s).addClass(K.disabled):Z("#nData",s).removeClass(K.disabled)}function L(){var e=Z(p).jqGrid("getDataIDs"),t=Z("#id_g",f).val();if(p.p.multiselect&&$[p.p.id].editselected){for(var i=[],a=0,d=e.length;a<d;a++)-1!==Z.inArray(e[a],p.p.selarrrow)&&i.push(e[a]);return[Z.inArray(t,i),i]}return[Z.inArray(t,e),e]}function Q(){if($[p.p.id].checkOnSubmit||$[p.p.id].checkOnUpdate){var e,t,i=[],a={},i=Z.map(p.p.savedData,function(e,t){return t});for(e in Z(".FormElement",b).each(function(){if(""!==Z.jgrid.trim(this.name)&&-1===i.indexOf(this.name)){var e=Z(this).val(),t=Z(this).get(0).type;if("checkbox"===t)Z(this).is(":checked")||(e=Z(this).attr("offval"));else if("select-multiple"===t)e=e.join(",");else if("radio"===t){if(a.hasOwnProperty(this.name))return!0;a[this.name]=void 0===Z(this).attr("offval")?"off":Z(this).attr("offval")}p.p.savedData[this.name]=e}}),a)a.hasOwnProperty(e)&&(t=Z('input[name="'+e+'"]:checked',b).val(),p.p.savedData[e]=void 0!==t?t:a[e])}}})},viewGridRow:function(R,U){var e=Z.jgrid.getRegional(this[0],"view"),t=this[0].p.styleUI,T=Z.jgrid.styleUI[t].formedit,N=Z.jgrid.styleUI[t].common;return U=Z.extend(!0,{top:0,left:0,width:500,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"auto",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1,removemodal:!0,form:"view",buttons:[]},e,U||{}),$[Z(this)[0].p.id]=U,this.each(function(){var r=this;if(r.grid&&R){var a=r.p.id,d="ViewGrid_"+Z.jgrid.jqID(a),n="ViewTbl_"+Z.jgrid.jqID(a),i="ViewGrid_"+a,e="ViewTbl_"+a,t={themodal:"viewmod"+a,modalhead:"viewhd"+a,modalcontent:"viewcnt"+a,scrollelm:d},o=!0,l=1,s=0,c=($[r.p.id].styleUI=r.p.styleUI||"jQueryUI",U.recreateForm||Z(r).data("viewProp")&&Z.extend($[Z(this)[0].p.id],Z(r).data("viewProp")),isNaN($[Z(this)[0].p.id].dataheight)?$[Z(this)[0].p.id].dataheight:$[Z(this)[0].p.id].dataheight+"px"),p=isNaN($[Z(this)[0].p.id].datawidth)?$[Z(this)[0].p.id].datawidth:$[Z(this)[0].p.id].datawidth+"px",p=Z("<form name='FormPost' id='"+i+"' class='FormGrid' style='width:"+p+";height:"+c+";'></form>"),u=Z("<table id='"+e+"' class='EditTable ViewTable'><tbody></tbody></table>");if(Z(r.p.colModel).each(function(){var e=this.formoptions;l=Math.max(l,e&&e.colpos||0),s=Math.max(s,e&&e.rowpos||0)}),Z(p).append(u),!1!==(o=(o=void 0===(o=Z(r).triggerHandler("jqGridViewRowBeforeInitData",[p]))?!0:o)&&Z.jgrid.isFunction($[r.p.id].beforeInitData)?$[r.p.id].beforeInitData.call(r,p):o)){for(var h,g,m,f,j,v,b,w,c=R,D=r,y=u,q=l,x=0,_="<td class='CaptionTD form-view-label "+N.content+"' width='"+U.labelswidth+"'></td><td class='DataTD form-view-data ui-helper-reset "+N.content+"'></td>",I="",M="<td class='CaptionTD form-view-label "+N.content+"'></td><td class='DataTD form-view-data "+N.content+"'></td>",B=["integer","number","currency"],k=0,C=0,F=1;F<=q;F++)I+=1===F?_:M;Z(D.p.colModel).each(function(){(g=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden)||"right"!==this.align||(this.formatter&&-1!==Z.inArray(this.formatter,B)?k=Math.max(k,parseInt(this.width,10)):C=Math.max(C,parseInt(this.width,10)))}),v=0!==k?k:0!==C?C:0,j=Z(D).jqGrid("getInd",c),Z(D.p.colModel).each(function(e){var t,i,a,d;h=this.name,g=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden,f=g?"style='display:none'":"",w="boolean"!=typeof this.viewable||this.viewable,"cb"!==h&&"subgrid"!==h&&"rn"!==h&&w&&"sc"!==h&&(w=!1===j?"":h===D.p.ExpandColumn&&!0===D.p.treeGrid?Z("td",D.rows[j]).eq(e).text():Z("td",D.rows[j]).eq(e).html(),b="right"===this.align&&0!==v,t=Z.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),i=parseInt(t.rowpos,10)||x+1,a=parseInt(2*(parseInt(t.colpos,10)||1),10),t.rowabove&&(d=Z("<tr><td class='contentinfo' colspan='"+2*q+"'>"+t.rowcontent+"</td></tr>"),Z(y).append(d),d[0].rp=i),0===(m=Z(y).find("tr[rowpos="+i+"]")).length&&(m=Z("<tr "+f+" rowpos='"+i+"'></tr>").addClass("FormData").attr("id","trv_"+h),Z(m).append(I),Z(y).append(m),m[0].rp=i),Z("td",m[0]).eq(a-2).html("<b>"+(void 0===t.label?D.p.colNames[e]:t.label)+"</b>"),Z("td",m[0]).eq(a-1).append("<span>"+w+"</span>").attr("id","v_"+h),b&&Z("td",m[0]).eq(a-1).find("span").css({"text-align":"right",width:v+"px"}),x,x++)}),0<x&&((c=Z("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*q-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+c+"'/></td></tr>"))[0].rp=x+99,Z(y).append(c));var G,e="rtl"===r.p.direction,o="<a id='"+(e?"nData":"pData")+"' class='fm-button "+N.button+"'><span class='"+N.icon_base+" "+T.icon_prev+"'></span></a>",c="<a id='"+(e?"pData":"nData")+"' class='fm-button "+N.button+"'><span class='"+N.icon_base+" "+T.icon_next+"'></span></a>",O="<a id='cData' class='fm-button "+N.button+"'>"+U.bClose+"</a>",O=Array.isArray($[r.p.id].buttons)?Z.jgrid.buildButtons($[r.p.id].buttons,O,N):O,p=(0<s&&(G=[],Z.each(Z(u)[0].rows,function(e,t){G[e]=t}),G.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),Z.each(G,function(e,t){Z("tbody",u).append(t)})),U.gbox="#gbox_"+Z.jgrid.jqID(a),Z("<div></div>").append(p).append("<table border='0' class='EditTable' id='"+n+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+U.labelswidth+"'>"+(e?c+o:o+c)+"</td><td class='EditButton'>"+O+"</td></tr></tbody></table>")),o=Z(".ui-jqgrid").css("font-size")||"11px",c=(Z.jgrid.createModal(t,p,$[Z(this)[0].p.id],"#gview_"+Z.jgrid.jqID(r.p.id),Z("#gview_"+Z.jgrid.jqID(r.p.id))[0],null,{"font-size":o}),e&&(Z("#pData, #nData","#"+n+"_2").css("float","right"),Z(".EditButton","#"+n+"_2").css("text-align","left")),U.viewPagerButtons||Z("#pData, #nData","#"+n+"_2").hide(),Z("#"+t.themodal).keydown(function(e){return 27===e.which?($[r.p.id].closeOnEscape&&Z.jgrid.hideModal("#"+Z.jgrid.jqID(t.themodal),{gb:U.gbox,jqm:U.jqModal,onClose:U.onClose,removemodal:$[r.p.id].removemodal,formprop:!$[r.p.id].recreateForm,form:$[r.p.id].form}),!1):!0===U.navkeys[0]?e.which===U.navkeys[1]?(Z("#pData","#"+n+"_2").trigger("click"),!1):e.which===U.navkeys[2]?(Z("#nData","#"+n+"_2").trigger("click"),!1):void 0:void 0}),U.closeicon=Z.extend([!0,"left",T.icon_close],U.closeicon),!0===U.closeicon[0]&&Z("#cData","#"+n+"_2").addClass("right"===U.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+N.icon_base+" "+U.closeicon[2]+"'></span>"),Z(r).triggerHandler("jqGridViewRowBeforeShowForm",[Z("#"+d)]),Z.jgrid.isFunction(U.beforeShowForm)&&U.beforeShowForm.call(r,Z("#"+d)),Z.jgrid.viewModal("#"+Z.jgrid.jqID(t.themodal),{gbox:"#gbox_"+Z.jgrid.jqID(a),jqm:U.jqModal,overlay:U.overlay,modal:U.modal,onHide:function(e){var t="rtl"===Z("#gbox_"+Z.jgrid.jqID(a)).attr("dir"),i=parseFloat(Z("#viewmod"+a)[0].style.width);Z(r).data("viewProp",{top:parseFloat(Z(e.w).css("top")),left:t?Z("#gbox_"+Z.jgrid.jqID(a)).outerWidth()-i-parseFloat(Z(e.w).css("left"))+12:parseFloat(Z(e.w).css("left")),width:Z(e.w).width(),height:Z(e.w).height(),dataheight:Z("#"+d).height(),datawidth:Z("#"+d).width()}),e.w.remove(),e.o&&e.o.remove()}}),Z(".fm-button:not(."+N.disabled+")","#"+n+"_2").hover(function(){Z(this).addClass(N.hover)},function(){Z(this).removeClass(N.hover)}),P(),Z("#cData","#"+n+"_2").click(function(){return Z.jgrid.hideModal("#"+Z.jgrid.jqID(t.themodal),{gb:"#gbox_"+Z.jgrid.jqID(a),jqm:U.jqModal,onClose:U.onClose,removemodal:$[r.p.id].removemodal,formprop:!$[r.p.id].recreateForm,form:$[r.p.id].form}),!1}),Z("#"+n+"_2").find("[data-index]").each(function(){var t=parseInt(Z(this).attr("data-index"),10);0<=t&&U.buttons[t].hasOwnProperty("click")&&Z(this).on("click",function(e){U.buttons[t].click.call(r,Z("#"+i)[0],$[r.p.id],e)})}),Z("#nData","#"+n+"_2").click(function(){Z("#FormError","#"+n).hide();var e=A();return e[0]=parseInt(e[0],10),-1!==e[0]&&e[1][e[0]+1]&&(Z(r).triggerHandler("jqGridViewRowClickPgButtons",["next",Z("#"+d),e[1][e[0]]]),Z.jgrid.isFunction(U.onclickPgButtons)&&U.onclickPgButtons.call(r,"next",Z("#"+d),e[1][e[0]]),S(e[1][e[0]+1],r),r.p.multiselect&&$[r.p.id].viewselected||Z(r).jqGrid("setSelection",e[1][e[0]+1]),Z(r).triggerHandler("jqGridViewRowAfterClickPgButtons",["next",Z("#"+d),e[1][e[0]+1]]),Z.jgrid.isFunction(U.afterclickPgButtons)&&U.afterclickPgButtons.call(r,"next",Z("#"+d),e[1][e[0]+1]),E(e[0]+1,e)),P(),!1}),Z("#pData","#"+n+"_2").click(function(){Z("#FormError","#"+n).hide();var e=A();return-1!==e[0]&&e[1][e[0]-1]&&(Z(r).triggerHandler("jqGridViewRowClickPgButtons",["prev",Z("#"+d),e[1][e[0]]]),Z.jgrid.isFunction(U.onclickPgButtons)&&U.onclickPgButtons.call(r,"prev",Z("#"+d),e[1][e[0]]),S(e[1][e[0]-1],r),r.p.multiselect&&$[r.p.id].viewselected||Z(r).jqGrid("setSelection",e[1][e[0]-1]),Z(r).triggerHandler("jqGridViewRowAfterClickPgButtons",["prev",Z("#"+d),e[1][e[0]-1]]),Z.jgrid.isFunction(U.afterclickPgButtons)&&U.afterclickPgButtons.call(r,"prev",Z("#"+d),e[1][e[0]-1]),E(e[0]-1,e)),P(),!1}),A());E(c[0],c)}}function P(){!0!==$[r.p.id].closeOnEscape&&!0!==$[r.p.id].navkeys[0]||setTimeout(function(){Z(".ui-jqdialog-titlebar-close","#"+Z.jgrid.jqID(t.modalhead)).attr("tabindex","-1").focus()},0)}function S(e,t){var i,a,d,r=0,o=Z(t).jqGrid("getInd",e,!0);o&&(Z("td",o).each(function(e){i=t.p.colModel[e].name,a=(!t.p.colModel[e].editrules||!0!==t.p.colModel[e].editrules.edithidden)&&!0===t.p.colModel[e].hidden,"cb"!==i&&"subgrid"!==i&&"rn"!==i&&"sc"!==i&&(d=i===t.p.ExpandColumn&&!0===t.p.treeGrid?Z(this).text():Z(this).html(),i=Z.jgrid.jqID("v_"+i),Z("#"+i+" span","#"+n).html(d),a&&Z("#"+i,"#"+n).parents("tr").first().hide(),r++)}),0<r)&&Z("#id_g","#"+n).val(e)}function E(e,t){var i=t[1].length-1;0===e?Z("#pData","#"+n+"_2").addClass(N.disabled):void 0!==t[1][e-1]&&Z("#"+Z.jgrid.jqID(t[1][e-1])).hasClass(N.disabled)?Z("#pData",n+"_2").addClass(N.disabled):Z("#pData","#"+n+"_2").removeClass(N.disabled),e===i?Z("#nData","#"+n+"_2").addClass(N.disabled):void 0!==t[1][e+1]&&Z("#"+Z.jgrid.jqID(t[1][e+1])).hasClass(N.disabled)?Z("#nData",n+"_2").addClass(N.disabled):Z("#nData","#"+n+"_2").removeClass(N.disabled)}function A(){var e=Z(r).jqGrid("getDataIDs"),t=Z("#id_g","#"+n).val();if(r.p.multiselect&&$[r.p.id].viewselected){for(var i=[],a=0,d=e.length;a<d;a++)-1!==Z.inArray(e[a],r.p.selarrrow)&&i.push(e[a]);return[Z.inArray(t,i),i]}return[Z.inArray(t,e),e]}})},delGridRow:function(h,g){var e=Z.jgrid.getRegional(this[0],"del"),t=this[0].p.styleUI,m=Z.jgrid.styleUI[t].formedit,f=Z.jgrid.styleUI[t].common;return g=Z.extend(!0,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},e,g||{}),$[Z(this)[0].p.id]=g,this.each(function(){var o=this;if(o.grid&&h){var n,a,l,s=o.p.id,c={},e=!0,p="DelTbl_"+Z.jgrid.jqID(s),i="DelTbl_"+s,u={themodal:"delmod"+s,modalhead:"delhd"+s,modalcontent:"delcnt"+s,scrollelm:p};if($[o.p.id].styleUI=o.p.styleUI||"jQueryUI",Array.isArray(h)&&(h=h.join()),void 0!==Z("#"+Z.jgrid.jqID(u.themodal))[0]){if(!1===(e=(e=void 0===(e=Z(o).triggerHandler("jqGridDelRowBeforeInitData",[Z("#"+p)]))?!0:e)&&Z.jgrid.isFunction($[o.p.id].beforeInitData)?$[o.p.id].beforeInitData.call(o,Z("#"+p)):e))return;Z("#DelData>td","#"+p).text(h),Z("#DelError","#"+p).hide(),!0===$[o.p.id].processing&&($[o.p.id].processing=!1,Z("#dData","#"+p).removeClass(f.active))}else{var t=isNaN($[o.p.id].dataheight)?$[o.p.id].dataheight:$[o.p.id].dataheight+"px",d=isNaN(g.datawidth)?g.datawidth:g.datawidth+"px",d="<div id='"+i+"' class='formdata' style='width:"+d+";overflow:auto;position:relative;height:"+t+";'>",t=(d=(d=(d=d+"<table class='DelTable'><tbody>"+("<tr id='DelError' style='display:none'><td class='"+f.error+"'></td></tr>"))+("<tr id='DelData' style='display:none'><td >"+h+"</td></tr>"))+('<tr><td class="delmsg" style="white-space:pre;">'+$[o.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>")+"</tbody></table></div>","<a id='dData' class='fm-button "+f.button+"'>"+g.bSubmit+"</a>"),r="<a id='eData' class='fm-button "+f.button+"'>"+g.bCancel+"</a>",t=Array.isArray($[o.p.id].buttons)?Z.jgrid.buildButtons($[o.p.id].buttons,t+r,f):t+r,r=Z(".ui-jqgrid").css("font-size")||"11px";if(d+="<table class='EditTable ui-common-table' id='"+p+"_2'><tbody><tr><td><hr class='"+f.content+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+t+"</td></tr></tbody></table>",g.gbox="#gbox_"+Z.jgrid.jqID(s),Z.jgrid.createModal(u,d,$[o.p.id],"#gview_"+Z.jgrid.jqID(o.p.id),Z("#gview_"+Z.jgrid.jqID(o.p.id))[0],null,{"font-size":r}),Z(".fm-button","#"+p+"_2").hover(function(){Z(this).addClass(f.hover)},function(){Z(this).removeClass(f.hover)}),g.delicon=Z.extend([!0,"left",m.icon_del],$[o.p.id].delicon),g.cancelicon=Z.extend([!0,"left",m.icon_cancel],$[o.p.id].cancelicon),!0===g.delicon[0]&&Z("#dData","#"+p+"_2").addClass("right"===g.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+f.icon_base+" "+g.delicon[2]+"'></span>"),!0===g.cancelicon[0]&&Z("#eData","#"+p+"_2").addClass("right"===g.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+f.icon_base+" "+g.cancelicon[2]+"'></span>"),Z("#dData","#"+p+"_2").click(function(){var e,d=[!0,""],r=Z("#DelData>td","#"+p).text();if(c={},void 0===(c=Z(o).triggerHandler("jqGridDelRowClickSubmit",[$[o.p.id],r]))&&Z.jgrid.isFunction($[o.p.id].onclickSubmit)&&(c=$[o.p.id].onclickSubmit.call(o,$[o.p.id],r)||{}),(d=(d=void 0===(d=Z(o).triggerHandler("jqGridDelRowBeforeSubmit",[r]))?[!0,"",""]:d)[0]&&Z.jgrid.isFunction($[o.p.id].beforeSubmit)?$[o.p.id].beforeSubmit.call(o,r):d)[0]&&!$[o.p.id].processing){if($[o.p.id].processing=!0,a=o.p.prmNames,n=Z.extend({},$[o.p.id].delData,c),l=a.oper,n[l]=a.deloper,l=a.id,!(r=String(r).split(",")).length)return!1;for(e in r)r.hasOwnProperty(e)&&(r[e]=Z.jgrid.stripPref(o.p.idPrefix,r[e]));n[l]=r.join(),Z(this).addClass(f.active);var t,i=Z.extend({url:$[o.p.id].url||Z(o).jqGrid("getGridParam","editurl"),type:$[o.p.id].mtype,data:Z.jgrid.isFunction($[o.p.id].serializeDelData)?$[o.p.id].serializeDelData.call(o,n):n,complete:function(e,t){var i,a;if(Z("#dData","#"+p+"_2").removeClass(f.active),300<=e.status&&304!==e.status?(d[0]=!1,d[1]=Z(o).triggerHandler("jqGridDelRowErrorTextFormat",[e]),Z.jgrid.isFunction($[o.p.id].errorTextFormat)&&(d[1]=$[o.p.id].errorTextFormat.call(o,e)),void 0===d[1]&&(d[1]=t+" Status: '"+e.statusText+"'. Error code: "+e.status)):(d=void 0===(d=Z(o).triggerHandler("jqGridDelRowAfterSubmit",[e,n]))?[!0,"",""]:d)[0]&&Z.jgrid.isFunction($[o.p.id].afterSubmit)&&(d=$[o.p.id].afterSubmit.call(o,e,n)),!1===d[0])Z("#DelError>td","#"+p).html(d[1]),Z("#DelError","#"+p).show();else{if($[o.p.id].reloadAfterSubmit&&"local"!==o.p.datatype)Z(o).trigger("reloadGrid");else{if(!0===o.p.treeGrid)try{Z(o).jqGrid("delTreeNode",o.p.idPrefix+r[0])}catch(e){}else for(i=0;i<r.length;i++)Z(o).jqGrid("delRowData",o.p.idPrefix+r[i]);o.p.selrow=null,o.p.selarrrow=[]}(Z.jgrid.isFunction($[o.p.id].afterComplete)||Object.prototype.hasOwnProperty.call(Z._data(Z(o)[0],"events"),"jqGridDelRowAfterComplete"))&&(a=e,setTimeout(function(){Z(o).triggerHandler("jqGridDelRowAfterComplete",[a,n]);try{$[o.p.id].afterComplete.call(o,a,n)}catch(e){}},500))}$[o.p.id].processing=!1,d[0]&&Z.jgrid.hideModal("#"+Z.jgrid.jqID(u.themodal),{gb:"#gbox_"+Z.jgrid.jqID(s),jqm:g.jqModal,onClose:$[o.p.id].onClose})}},Z.jgrid.ajaxOptions,$[o.p.id].ajaxDelOptions);i.url||$[o.p.id].useDataProxy||(Z.jgrid.isFunction(o.p.dataProxy)?$[o.p.id].useDataProxy=!0:(d[0]=!1,d[1]+=" "+Z.jgrid.getRegional(o,"errors.nourl"))),d[0]&&($[o.p.id].useDataProxy?!1===(t=void 0===(t=o.p.dataProxy.call(o,i,"del_"+o.p.id))?[!0,""]:t)[0]?(d[0]=!1,d[1]=t[1]||"Error deleting the selected row!"):Z.jgrid.hideModal("#"+Z.jgrid.jqID(u.themodal),{gb:"#gbox_"+Z.jgrid.jqID(s),jqm:g.jqModal,onClose:$[o.p.id].onClose}):"clientArray"===i.url?(n=i.data,i.complete({status:200,statusText:""},"")):Z.ajax(i))}return!1===d[0]&&(Z("#DelError>td","#"+p).html(d[1]),Z("#DelError","#"+p).show()),!1}),Z("#eData","#"+p+"_2").click(function(){return Z.jgrid.hideModal("#"+Z.jgrid.jqID(u.themodal),{gb:"#gbox_"+Z.jgrid.jqID(s),jqm:$[o.p.id].jqModal,onClose:$[o.p.id].onClose}),!1}),Z("#"+p+"_2").find("[data-index]").each(function(){var t=parseInt(Z(this).attr("data-index"),10);0<=t&&g.buttons[t].hasOwnProperty("click")&&Z(this).on("click",function(e){g.buttons[t].click.call(o,Z("#"+i)[0],$[o.p.id],e)})}),!1===(e=(e=void 0===(e=Z(o).triggerHandler("jqGridDelRowBeforeInitData",[Z("#"+p)]))?!0:e)&&Z.jgrid.isFunction($[o.p.id].beforeInitData)?$[o.p.id].beforeInitData.call(o,Z("#"+p)):e))return}Z(o).triggerHandler("jqGridDelRowBeforeShowForm",[Z("#"+p)]),Z.jgrid.isFunction($[o.p.id].beforeShowForm)&&$[o.p.id].beforeShowForm.call(o,Z("#"+p)),Z.jgrid.viewModal("#"+Z.jgrid.jqID(u.themodal),{gbox:"#gbox_"+Z.jgrid.jqID(s),jqm:$[o.p.id].jqModal,overlay:$[o.p.id].overlay,modal:$[o.p.id].modal}),Z(o).triggerHandler("jqGridDelRowAfterShowForm",[Z("#"+p)]),Z.jgrid.isFunction($[o.p.id].afterShowForm)&&$[o.p.id].afterShowForm.call(o,Z("#"+p)),!0===$[o.p.id].closeOnEscape&&setTimeout(function(){Z(".ui-jqdialog-titlebar-close","#"+Z.jgrid.jqID(u.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(g,m,f,j,v,b,w){var D=Z.jgrid.getRegional(this[0],"nav"),y=this[0].p.styleUI,e=Z.jgrid.styleUI[y].navigator,q=Z.jgrid.styleUI[y].common;return m=Z.extend({edit:!0,editicon:e.icon_edit_nav,add:!0,addicon:e.icon_add_nav,del:!0,delicon:e.icon_del_nav,search:!0,searchicon:e.icon_search_nav,refresh:!0,refreshicon:e.icon_refresh_nav,refreshstate:"firstpage",view:!1,viewicon:e.icon_view_nav,position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null,dropmenu:!1,navButtonText:""},D,m||{}),this.each(function(){if(!this.p.navGrid){var t,i={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},a=this;if(a.grid&&"string"==typeof g){Z(a).data("navGrid")||Z(a).data("navGrid",m),t=Z(a).data("navGrid"),a.p.force_regional&&(t=Z.extend(t,D)),void 0===Z("#"+i.themodal)[0]&&(t.alerttop||t.alertleft||((d=Z.jgrid.findPos(this))[0]=Math.round(d[0]),d[1]=Math.round(d[1]),0===(e=isNaN(this.p.height)?Z(a.grid.bDiv).height():this.p.height)&&(e=200),t.alertleft=d[0]+this.p.width/2-parseInt(t.alertwidth,10)/2,t.alerttop=d[1]+e/2-25),d=Z(".ui-jqgrid").css("font-size")||"11px",Z.jgrid.createModal(i,"<div>"+t.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+Z.jgrid.jqID(a.p.id),jqModal:!0,drag:!0,resize:!0,caption:t.alertcap,top:t.alerttop,left:t.alertleft,width:t.alertwidth,height:t.alertheight,closeOnEscape:t.closeOnEscape,zIndex:t.alertzIndex,styleUI:a.p.styleUI},"#gview_"+Z.jgrid.jqID(a.p.id),Z("#gbox_"+Z.jgrid.jqID(a.p.id))[0],!0,{"font-size":d}));var e,d,r,o=1,n=function(){Z(this).hasClass(q.disabled)||Z(this).addClass(q.hover)},l=function(){Z(this).removeClass(q.hover)};for(t.cloneToTop&&a.p.toppager&&(o=2),r=0;r<o;r++){var s,c,p,u=Z("<table class='ui-pg-table navtable ui-common-table'><tbody><tr></tr></tbody></table>"),h="<td class='ui-pg-button "+q.disabled+"' style='width:4px;'><span class='ui-separator'></span></td>";0===r?(0===(c=g).indexOf("#")&&(c=c.substring(1),c="#"+Z.jgrid.jqID(c)),p=a.p.id,c===a.p.toppager&&(p+="_top",o=1)):(c=a.p.toppager,p=a.p.id+"_top"),"rtl"===a.p.direction&&Z(u).attr("dir","rtl").css("float","right"),j=j||{},t.add&&(s=Z("<td class='ui-pg-button "+q.cornerall+"'></td>"),Z(s).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+t.addicon+"'></span>"+t.addtext+"</div>"),Z("tr",u).append(s),Z(s,u).attr({title:t.addtitle||"",id:j.id||"add_"+p}).click(function(){return Z(this).hasClass(q.disabled)||(Z.jgrid.setSelNavIndex(a,this),Z.jgrid.isFunction(t.addfunc)?t.addfunc.call(a):Z(a).jqGrid("editGridRow","new",j)),!1}).hover(n,l),s=null),f=f||{},t.edit&&(s=Z("<td class='ui-pg-button "+q.cornerall+"'></td>"),Z(s).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+t.editicon+"'></span>"+t.edittext+"</div>"),Z("tr",u).append(s),Z(s,u).attr({title:t.edittitle||"",id:f.id||"edit_"+p}).click(function(){var e;return Z(this).hasClass(q.disabled)||((e=a.p.selrow)?(Z.jgrid.setSelNavIndex(a,this),Z.jgrid.isFunction(t.editfunc)?t.editfunc.call(a,e):Z(a).jqGrid("editGridRow",e,f)):(Z.jgrid.viewModal("#"+i.themodal,{gbox:"#gbox_"+Z.jgrid.jqID(a.p.id),jqm:!0}),Z("#jqg_alrt").focus())),!1}).hover(n,l),s=null),w=w||{},t.view&&(s=Z("<td class='ui-pg-button "+q.cornerall+"'></td>"),Z(s).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+t.viewicon+"'></span>"+t.viewtext+"</div>"),Z("tr",u).append(s),Z(s,u).attr({title:t.viewtitle||"",id:w.id||"view_"+p}).click(function(){var e;return Z(this).hasClass(q.disabled)||((e=a.p.selrow)?(Z.jgrid.setSelNavIndex(a,this),Z.jgrid.isFunction(t.viewfunc)?t.viewfunc.call(a,e):Z(a).jqGrid("viewGridRow",e,w)):(Z.jgrid.viewModal("#"+i.themodal,{gbox:"#gbox_"+Z.jgrid.jqID(a.p.id),jqm:!0}),Z("#jqg_alrt").focus())),!1}).hover(n,l),s=null),v=v||{},t.del&&(s=Z("<td class='ui-pg-button "+q.cornerall+"'></td>"),Z(s).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+t.delicon+"'></span>"+t.deltext+"</div>"),Z("tr",u).append(s),Z(s,u).attr({title:t.deltitle||"",id:v.id||"del_"+p}).click(function(){var e;return Z(this).hasClass(q.disabled)||(a.p.multiselect?0===(e=a.p.selarrrow).length&&(e=null):e=a.p.selrow,e?(Z.jgrid.setSelNavIndex(a,this),Z.jgrid.isFunction(t.delfunc)?t.delfunc.call(a,e):Z(a).jqGrid("delGridRow",e,v)):(Z.jgrid.viewModal("#"+i.themodal,{gbox:"#gbox_"+Z.jgrid.jqID(a.p.id),jqm:!0}),Z("#jqg_alrt").focus())),!1}).hover(n,l),s=null),(t.add||t.edit||t.del||t.view)&&Z("tr",u).append(h),b=b||{},t.search&&(s=Z("<td class='ui-pg-button "+q.cornerall+"'></td>"),Z(s).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+t.searchicon+"'></span>"+t.searchtext+"</div>"),Z("tr",u).append(s),Z(s,u).attr({title:t.searchtitle||"",id:b.id||"search_"+p}).click(function(){return Z(this).hasClass(q.disabled)||(Z.jgrid.setSelNavIndex(a,this),Z.jgrid.isFunction(t.searchfunc)?t.searchfunc.call(a,b):Z(a).jqGrid("searchGrid",b)),!1}).hover(n,l),b.showOnLoad&&!0===b.showOnLoad&&Z(s,u).click(),s=null),t.refresh&&(s=Z("<td class='ui-pg-button "+q.cornerall+"'></td>"),Z(s).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+t.refreshicon+"'></span>"+t.refreshtext+"</div>"),Z("tr",u).append(s),Z(s,u).attr({title:t.refreshtitle||"",id:"refresh_"+p}).click(function(){if(!Z(this).hasClass(q.disabled)){Z.jgrid.isFunction(t.beforeRefresh)&&t.beforeRefresh.call(a),a.p.search=!1,a.p.resetsearch=!0;try{if("currentfilter"!==t.refreshstate){var e=a.p.id;a.p.postData.filters="";try{Z("#fbox_"+Z.jgrid.jqID(e)).jqFilter("resetFilter")}catch(e){}Z.jgrid.isFunction(a.clearToolbar)&&a.clearToolbar.call(a,!1)}}catch(e){}switch(t.refreshstate){case"firstpage":Z(a).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":Z(a).trigger("reloadGrid",[{current:!0}])}Z.jgrid.isFunction(t.afterRefresh)&&t.afterRefresh.call(a),Z.jgrid.setSelNavIndex(a,this)}return!1}).hover(n,l),s=null),h=Z(".ui-jqgrid").css("font-size")||"11px",Z("body").append("<div id='testpg2' class='ui-jqgrid "+Z.jgrid.styleUI[y].base.entrieBox+"' style='font-size:"+h+";visibility:hidden;' ></div>"),h=Z(u).clone().appendTo("#testpg2").width(),Z("#testpg2").remove(),a.p._nvtd&&(t.dropmenu?(u=null,Z(a).jqGrid("_buildNavMenu",c,p,m,f,j,v,b,w)):h>a.p._nvtd[0]?(a.p.responsive?(u=null,Z(a).jqGrid("_buildNavMenu",c,p,m,f,j,v,b,w)):Z(c+"_"+t.position,c).append(u).width(h),a.p._nvtd[0]=h):Z(c+"_"+t.position,c).append(u),a.p._nvtd[1]=h),a.p.navGrid=!0}a.p.storeNavOptions&&(a.p.navOptions=t,a.p.editOptions=f,a.p.addOptions=j,a.p.delOptions=v,a.p.searchOptions=b,a.p.viewOptions=w,a.p.navButtons=[])}}})},navButtonAdd:function(l,s){var c=this[0].p.styleUI,e=Z.jgrid.styleUI[c].navigator;return s=Z.extend({caption:"newButton",title:"",buttonicon:e.icon_newbutton_nav,onClickButton:null,position:"last",cursor:"pointer",internal:!1},s||{}),this.each(function(){var t,i,e,a,d,r,o,n;this.grid&&"string"==typeof l&&(0===l.indexOf("#")&&(l=l.substring(1)),l="#"+Z.jgrid.jqID(l),n=Z(".navtable",l)[0],i=Z.jgrid.styleUI[c].common.disabled,e=Z.jgrid.styleUI[c].common.hover,a=Z.jgrid.styleUI[c].common.cornerall,r=Z.jgrid.styleUI[c].common.icon_base,(t=this).p.storeNavOptions&&!s.internal&&t.p.navButtons.push([l,s]),n?s.id&&void 0!==Z("#"+Z.jgrid.jqID(s.id),n)[0]||(o=Z("<td></td>"),"NONE"===s.buttonicon.toString().toUpperCase()?Z(o).addClass("ui-pg-button "+a).append("<div class='ui-pg-div'>"+s.caption+"</div>"):Z(o).addClass("ui-pg-button "+a).append("<div class='ui-pg-div'><span class='"+r+" "+s.buttonicon+"'></span>"+s.caption+"</div>"),s.id&&Z(o).attr("id",s.id),"first"!==s.position||0===n.rows[0].cells.length?Z("tr",n).append(o):Z("tr td",n).eq(0).before(o),Z(o,n).attr("title",s.title||"").click(function(e){return Z(this).hasClass(i)||(Z.jgrid.setSelNavIndex(t,this),Z.jgrid.isFunction(s.onClickButton)&&s.onClickButton.call(t,e)),!1}).hover(function(){Z(this).hasClass(i)||Z(this).addClass(e)},function(){Z(this).removeClass(e)})):(n=Z(".dropdownmenu",l)[0])&&(d=Z(n).val(),r=s.id||Z.jgrid.randId(),o=Z('<li class="ui-menu-item" role="presentation"><a class="'+a+' g-menu-item" tabindex="0" role="menuitem" id="'+r+'">'+(s.caption||s.title)+"</a></li>"),d)&&("first"===s.position?Z("#"+d).prepend(o):Z("#"+d).append(o),Z(o).on("click",function(e){return Z(this).hasClass(i)||(Z("#"+d).hide(),Z.jgrid.isFunction(s.onClickButton)&&s.onClickButton.call(t,e)),!1}).find("a").hover(function(){Z(this).hasClass(i)||Z(this).addClass(e)},function(){Z(this).removeClass(e)})))})},navSeparatorAdd:function(i,a){var e=this[0].p.styleUI,d=Z.jgrid.styleUI[e].common;return a=Z.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},a||{}),this.each(function(){var e,t;this.grid&&("string"==typeof i&&0!==i.indexOf("#")&&(i="#"+Z.jgrid.jqID(i)),t=Z(".navtable",i)[0],this.p.storeNavOptions&&this.p.navButtons.push([i,a]),t?(e="<td class='ui-pg-button "+d.disabled+"' style='width:4px;'><span class='"+a.sepclass+"'></span>"+a.sepcontent+"</td>","first"!==a.position||0===t.rows[0].cells.length?Z("tr",t).append(e):Z("tr td",t).eq(0).before(e)):(t=Z(".dropdownmenu",i)[0],e="<li class='ui-menu-item "+d.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>",t&&(t=Z(t).val())&&("first"===a.position?Z("#"+t).prepend(e):Z("#"+t).append(e))))})},_buildNavMenu:function(c,p,u,h,g,m,f,j){return this.each(function(){var e,t,i,a=this,d=Z.jgrid.getRegional(a,"nav"),r=a.p.styleUI,o=(Z.jgrid.styleUI[r].navigator,Z.jgrid.styleUI[r].filter),n=Z.jgrid.styleUI[r].common,l="form_menu_"+Z.jgrid.randId(),r=u.navButtonText||d.selectcaption||"Actions",d="<button class='dropdownmenu "+n.button+"' value='"+l+"'>"+r+"</button>",s=(Z(c+"_"+u.position,c).append(d),{themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id});r=Z(".ui-jqgrid").css("font-size")||"11px",i=Z('<ul id="'+l+'" class="ui-nav-menu modal-content" role="menu" tabindex="0" style="display:none;font-size:'+r+'"></ul>'),u.add&&(e=(g=g||{}).id||"add_"+p,t=Z('<li class="ui-menu-item" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+e+'">'+(u.addtext||u.addtitle)+"</a></li>").click(function(){return Z(this).hasClass(n.disabled)||(Z.jgrid.isFunction(u.addfunc)?u.addfunc.call(a):Z(a).jqGrid("editGridRow","new",g),Z(i).hide()),!1}),Z(i).append(t)),u.edit&&(e=(h=h||{}).id||"edit_"+p,t=Z('<li class="ui-menu-item" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+e+'">'+(u.edittext||u.edittitle)+"</a></li>").click(function(){var e;return Z(this).hasClass(n.disabled)||((e=a.p.selrow)?Z.jgrid.isFunction(u.editfunc)?u.editfunc.call(a,e):Z(a).jqGrid("editGridRow",e,h):(Z.jgrid.viewModal("#"+s.themodal,{gbox:"#gbox_"+Z.jgrid.jqID(a.p.id),jqm:!0}),Z("#jqg_alrt").focus()),Z(i).hide()),!1}),Z(i).append(t)),u.view&&(e=(j=j||{}).id||"view_"+p,t=Z('<li class="ui-menu-item" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+e+'">'+(u.viewtext||u.viewtitle)+"</a></li>").click(function(){var e;return Z(this).hasClass(n.disabled)||((e=a.p.selrow)?Z.jgrid.isFunction(u.editfunc)?u.viewfunc.call(a,e):Z(a).jqGrid("viewGridRow",e,j):(Z.jgrid.viewModal("#"+s.themodal,{gbox:"#gbox_"+Z.jgrid.jqID(a.p.id),jqm:!0}),Z("#jqg_alrt").focus()),Z(i).hide()),!1}),Z(i).append(t)),u.del&&(e=(m=m||{}).id||"del_"+p,t=Z('<li class="ui-menu-item" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+e+'">'+(u.deltext||u.deltitle)+"</a></li>").click(function(){var e;return Z(this).hasClass(n.disabled)||(a.p.multiselect?0===(e=a.p.selarrrow).length&&(e=null):e=a.p.selrow,e?Z.jgrid.isFunction(u.delfunc)?u.delfunc.call(a,e):Z(a).jqGrid("delGridRow",e,m):(Z.jgrid.viewModal("#"+s.themodal,{gbox:"#gbox_"+Z.jgrid.jqID(a.p.id),jqm:!0}),Z("#jqg_alrt").focus()),Z(i).hide()),!1}),Z(i).append(t)),(u.add||u.edit||u.del||u.view)&&Z(i).append("<li class='ui-menu-item "+n.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>"),u.search&&(e=(f=f||{}).id||"search_"+p,t=Z('<li class="ui-menu-item" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+e+'">'+(u.searchtext||u.searchtitle)+"</a></li>").click(function(){return Z(this).hasClass(n.disabled)||(Z.jgrid.isFunction(u.searchfunc)?u.searchfunc.call(a,f):Z(a).jqGrid("searchGrid",f),Z(i).hide()),!1}),Z(i).append(t),f.showOnLoad)&&!0===f.showOnLoad&&Z(t).click(),u.refresh&&(e=f.id||"search_"+p,t=Z('<li class="ui-menu-item" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+e+'">'+(u.refreshtext||u.refreshtitle)+"</a></li>").click(function(){if(!Z(this).hasClass(n.disabled)){Z.jgrid.isFunction(u.beforeRefresh)&&u.beforeRefresh.call(a),a.p.search=!1,a.p.resetsearch=!0;try{if("currentfilter"!==u.refreshstate){var e=a.p.id;a.p.postData.filters="";try{Z("#fbox_"+Z.jgrid.jqID(e)).jqFilter("resetFilter")}catch(e){}Z.jgrid.isFunction(a.clearToolbar)&&a.clearToolbar.call(a,!1)}}catch(e){}switch(u.refreshstate){case"firstpage":Z(a).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":Z(a).trigger("reloadGrid",[{current:!0}])}Z.jgrid.isFunction(u.afterRefresh)&&u.afterRefresh.call(a),Z(i).hide()}return!1}),Z(i).append(t)),Z(i).hide(),Z("body").append(i),Z("#"+l).addClass("ui-menu "+o.menu_widget),Z("#"+l+" > li > a").hover(function(){Z(this).addClass(n.hover)},function(){Z(this).removeClass(n.hover)}),Z(".dropdownmenu",c+"_"+u.position).on("click",function(e){var t=Z(this).offset(),i=t.left,t=parseInt(t.top),a=Z(this).val();Z("#"+a).show().css({top:t-(Z("#"+a).height()+10)+"px",left:i+"px"}),e.stopPropagation()}),Z("body").on("click",function(e){Z(e.target).hasClass("dropdownmenu")||Z("#"+l).hide()})})},GridToForm:function(a,d){return this.each(function(){var e,t=this;if(t.grid){var i=Z(t).jqGrid("getRowData",a);if(i)for(e in i)i.hasOwnProperty(e)&&(Z("[name="+Z.jgrid.jqID(e)+"]",d).is("input:radio")||Z("[name="+Z.jgrid.jqID(e)+"]",d).is("input:checkbox")?Z("[name="+Z.jgrid.jqID(e)+"]",d).each(function(){Z(this).val()==i[e]?Z(this)[t.p.useProp?"prop":"attr"]("checked",!0):Z(this)[t.p.useProp?"prop":"attr"]("checked",!1)}):Z("[name="+Z.jgrid.jqID(e)+"]",d).val(i[e]))}})},FormToGrid:function(t,a,d,r){return this.each(function(){var e,i;this.grid&&(d=d||"set",r=r||"first",e=Z(a).serializeArray(),i={},Z.each(e,function(e,t){i[t.name]=t.value}),"add"===d?Z(this).jqGrid("addRowData",t,i,r):"set"===d&&Z(this).jqGrid("setRowData",t,i))})}})});