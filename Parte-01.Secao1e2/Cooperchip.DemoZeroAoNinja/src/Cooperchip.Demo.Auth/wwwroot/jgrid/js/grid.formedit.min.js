!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.base","./grid.common"],e):e(jQuery)}(function($){"use strict";var ee={};$.jgrid.extend({editGridRow:function(Y,J){var e=$.jgrid.getRegional(this[0],"edit"),t=this[0].p.styleUI,K=$.jgrid.styleUI[t].formedit,Z=$.jgrid.styleUI[t].common;return J=$.extend(!0,{top:0,left:0,width:"500",datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:Z.overlay,removemodal:!0,form:"edit",template:null,focusField:!0,editselected:!1,html5Check:!1,buttons:[]},e,J||{}),ee[$(this)[0].p.id]=J,this.each(function(){var p=this;if(p.grid&&Y){p.p.savedData={};var u,h,i,e,g=p.p.id,m="FrmGrid_"+g,t="TblGrid_"+g,f="#"+$.jgrid.jqID(t),j={themodal:"editmod"+g,modalhead:"edithd"+g,modalcontent:"editcnt"+g,scrollelm:m},a=!0,d=1,r=0,o="string"==typeof ee[p.p.id].template&&0<ee[p.p.id].template.length,v=$.jgrid.getRegional(this,"errors"),A=(ee[p.p.id].styleUI=p.p.styleUI||"jQueryUI",$.jgrid.isMobile()&&(ee[p.p.id].resize=!1),"new"===Y?(Y="_empty",h="add",J.caption=ee[p.p.id].addCaption):(J.caption=ee[p.p.id].editCaption,h="edit"),J.recreateForm||$(p).data("formProp")&&$.extend(ee[$(this)[0].p.id],$(p).data("formProp")),!0),n=(J.checkOnUpdate&&J.jqModal&&!J.modal&&(A=!1),isNaN(ee[$(this)[0].p.id].dataheight)?ee[$(this)[0].p.id].dataheight:ee[$(this)[0].p.id].dataheight+"px"),l=isNaN(ee[$(this)[0].p.id].datawidth)?ee[$(this)[0].p.id].datawidth:ee[$(this)[0].p.id].datawidth+"px",b=$("<form name='FormPost' id='"+m+"' class='FormGrid' onSubmit='return false;' style='width:"+l+";height:"+n+";'></form>").data("disabled",!1),s=o?(l=ee[$(this)[0].p.id].template,n="",i=n="string"==typeof l?l.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(e,t){return'<span id="'+t+'" ></span>'}):n,f):(i=$("<table id='"+t+"' class='EditTable ui-common-table'><tbody></tbody></table>"),f+"_2"),m="#"+$.jgrid.jqID(m);if($(b).append("<div class='FormError "+Z.error+"' style='display:none;'></div>"),$(b).append("<div class='tinfo topinfo'>"+ee[p.p.id].topinfo+"</div>"),$(p.p.colModel).each(function(){var e=this.formoptions;d=Math.max(d,e&&e.colpos||0),r=Math.max(r,e&&e.rowpos||0)}),$(b).append(i),!1!==(a=(a=void 0===(a=$(p).triggerHandler("jqGridAddEditBeforeInitData",[b,h]))?!0:a)&&$.jgrid.isFunction(ee[p.p.id].beforeInitData)?ee[p.p.id].beforeInitData.call(p,b,h):a)){if("_empty"!==Y&&void 0!==p.p.savedRow&&0<p.p.savedRow.length&&$.jgrid.isFunction($.fn.jqGrid.restoreRow))for(e=0;e<p.p.savedRow.length;e++)if(p.p.savedRow[e].id===Y){$(p).jqGrid("restoreRow",Y);break}for(var c,w,D,y,B,q,x,_=Y,I=p,k=i,C=d,F=0,R=[],G=!1,U="",T=1;T<=C;T++)U+="<td class='CaptionTD'></td><td class='DataTD'></td>";"_empty"!==_&&(G=$(I).jqGrid("getInd",_)),$(I.p.colModel).each(function(t){if(c=this.name,w=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden,B=w?"style='display:none'":"","cb"!==c&&"subgrid"!==c&&!0===this.editable&&"rn"!==c&&"sc"!==c){if(!1===G)y="";else if(c===I.p.ExpandColumn&&!0===I.p.treeGrid)y=$("td[role='gridcell']",I.rows[G]).eq(t).text();else{try{y=$.unformat.call(I,$("td[role='gridcell']",I.rows[G]).eq(t),{rowId:_,colModel:this},t)}catch(e){y=this.edittype&&"textarea"===this.edittype?$("td[role='gridcell']",I.rows[G]).eq(t).text():$("td[role='gridcell']",I.rows[G]).eq(t).html()}y&&"&nbsp;"!==y&&"&#160;"!==y&&(1!==y.length||160!==y.charCodeAt(0))||(y="")}var e,i=$.extend({},this.editoptions||{},{id:c,name:c,rowId:_,oper:h,module:"form",checkUpdate:ee[p.p.id].checkOnSubmit||ee[p.p.id].checkOnUpdate}),a=$.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),d=parseInt(a.rowpos,10)||F+1,r=parseInt(2*(parseInt(a.colpos,10)||1),10);"_empty"===_&&i.defaultValue&&(y=$.jgrid.isFunction(i.defaultValue)?i.defaultValue.call(p):i.defaultValue),this.edittype||(this.edittype="text"),p.p.autoencode&&(y=$.jgrid.htmlDecode(y)),q=$.jgrid.createEl.call(p,this.edittype,i,y,!1,$.extend({},$.jgrid.ajaxOptions,I.p.ajaxSelectOptions||{})),"select"===this.edittype&&(y=$(q).val(),"select-multiple"===$(q).get(0).type&&y&&(y=y.join(","))),"checkbox"===this.edittype&&(y=$(q).is(":checked")?$(q).val():$(q).attr("offval")),$(q).addClass("FormElement"),"select"===this.edittype?$(q).addClass(K.selectClass):-1<$.inArray(this.edittype,["text","textarea","password","color","date","datetime","datetime-local","email","month","number","range","search","tel","time","url","week"])&&$(q).addClass(K.inputClass),x=!0,o?(e=$(b).find("#"+c)).length?e.replaceWith(q):x=!1:(D=$(k).find("tr[rowpos="+d+"]"),a.rowabove&&(e=$("<tr><td class='contentinfo' colspan='"+2*C+"'>"+a.rowcontent+"</td></tr>"),$(k).append(e),e[0].rp=d),0===D.length&&(D=$(1<C?"<tr rowpos='"+d+"'></tr>":"<tr "+B+" rowpos='"+d+"'></tr>").addClass("FormData").attr("id","tr_"+c),$(D).append(U),$(k).append(D),D[0].rp=d),$("td",D[0]).eq(r-2).html("<label for='"+c+"'>"+(void 0===a.label?I.p.colNames[t]:a.label)+"</label>"),$("td",D[0]).eq(r-1).append(a.elmprefix).append(q).append(a.elmsuffix),1<C&&w&&($("td",D[0]).eq(r-2).hide(),$("td",D[0]).eq(r-1).hide())),(ee[p.p.id].checkOnSubmit||ee[p.p.id].checkOnUpdate)&&x&&(p.p.savedData[c]=y),"custom"===this.edittype&&$.jgrid.isFunction(i.custom_value)&&i.custom_value.call(p,$("#"+c,q),"set",y),$.jgrid.bindEv.call(p,q,i),R[F]=t,F++}}),0<F&&(o?(S="<div class='FormData' style='display:none'><input class='FormElement' id='id_g' type='text' name='"+I.p.id+"_id' value='"+_+"'/>",$(b).append(S)):((S=$("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*C-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+I.p.id+"_id' value='"+_+"'/></td></tr>"))[0].rp=F+999,$(k).append(S)),(ee[p.p.id].checkOnSubmit||ee[p.p.id].checkOnUpdate)&&(p.p.savedData[I.p.id+"_id"]=_));var O,l="rtl"===p.p.direction,n="<a id='"+(l?"nData":"pData")+"' class='fm-button "+Z.button+"'><span class='"+Z.icon_base+" "+K.icon_prev+"'></span></a>",a="<a id='"+(l?"pData":"nData")+"' class='fm-button "+Z.button+"'><span class='"+Z.icon_base+" "+K.icon_next+"'></span></a>",S="<a id='sData' class='fm-button "+Z.button+"'>"+J.bSubmit+"</a>",P="<a id='cData' class='fm-button "+Z.button+"'>"+J.bCancel+"</a>",E=Array.isArray(ee[p.p.id].buttons)?$.jgrid.buildButtons(ee[p.p.id].buttons,S+P,Z):S+P,E="<table style='height:auto' class='EditTable ui-common-table' id='"+t+"_2'><tbody><tr><td colspan='2'><hr class='"+Z.content+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(l?a+n:n+a)+"</td><td class='EditButton'>"+E+"</td></tr>",N=(E+="</tbody></table>",0<r&&(O=[],$.each($(i)[0].rows,function(e,t){O[e]=t}),O.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),$.each(O,function(e,t){$("tbody",i).append(t)})),J.gbox="#gbox_"+$.jgrid.jqID(g),!1),t=(!0===J.closeOnEscape&&(J.closeOnEscape=!1,N=!0),n=o?($(b).find("#pData").replaceWith(n),$(b).find("#nData").replaceWith(a),$(b).find("#sData").replaceWith(S),$(b).find("#cData").replaceWith(P),$("<div id="+t+"></div>").append(b)):$("<div></div>").append(b).append(E),$(b).append("<div class='binfo topinfo bottominfo'>"+ee[p.p.id].bottominfo+"</div>"),$(".ui-jqgrid").css("font-size")||"11px"),l=($.jgrid.createModal(j,n,ee[$(this)[0].p.id],"#gview_"+$.jgrid.jqID(p.p.id),$("#gbox_"+$.jgrid.jqID(p.p.id))[0],null,{"font-size":t}),l&&($("#pData, #nData",f+"_2").css("float","right"),$(".EditButton",f+"_2").css("text-align","left")),ee[p.p.id].topinfo&&$(".tinfo",m).show(),ee[p.p.id].bottominfo&&$(".binfo",m).show(),E=n=null,$("#"+$.jgrid.jqID(j.themodal)).keydown(function(e){var t=e.target;return!0!==$(m).data("disabled")&&(!0===ee[p.p.id].savekey[0]&&e.which===ee[p.p.id].savekey[1]&&"TEXTAREA"!==t.tagName?($("#sData",f+"_2").trigger("click"),!1):27===e.which?(M()&&N&&$.jgrid.hideModal("#"+$.jgrid.jqID(j.themodal),{gb:J.gbox,jqm:J.jqModal,onClose:ee[p.p.id].onClose,removemodal:ee[p.p.id].removemodal,formprop:!ee[p.p.id].recreateForm,form:ee[p.p.id].form}),!1):!0===ee[p.p.id].navkeys[0]?"_empty"===$("#id_g",f).val()||(e.which===ee[p.p.id].navkeys[1]?($("#pData",s).trigger("click"),!1):e.which===ee[p.p.id].navkeys[2]?($("#nData",s).trigger("click"),!1):void 0):void 0)}),J.checkOnUpdate&&($("a.ui-jqdialog-titlebar-close span","#"+$.jgrid.jqID(j.themodal)).removeClass("jqmClose"),$("a.ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(j.themodal)).off("click").click(function(){return M()&&$.jgrid.hideModal("#"+$.jgrid.jqID(j.themodal),{gb:"#gbox_"+$.jgrid.jqID(g),jqm:J.jqModal,onClose:ee[p.p.id].onClose,removemodal:ee[p.p.id].removemodal,formprop:!ee[p.p.id].recreateForm,form:ee[p.p.id].form}),!1})),J.saveicon=$.extend([!0,"left",K.icon_save],J.saveicon),J.closeicon=$.extend([!0,"left",K.icon_close],J.closeicon),!0===J.saveicon[0]&&$("#sData",s).addClass("right"===J.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+Z.icon_base+" "+J.saveicon[2]+"'></span>"),!0===J.closeicon[0]&&$("#cData",s).addClass("right"===J.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+Z.icon_base+" "+J.closeicon[2]+"'></span>"),(ee[p.p.id].checkOnSubmit||ee[p.p.id].checkOnUpdate)&&(S="<a id='sNew' class='fm-button "+Z.button+"' style='z-index:1002'>"+J.bYes+"</a>",a="<a id='nNew' class='fm-button "+Z.button+"' style='z-index:1002;margin-left:5px'>"+J.bNo+"</a>",P="<a id='cNew' class='fm-button "+Z.button+"' style='z-index:1002;margin-left:5px;'>"+J.bExit+"</a>",t=J.zIndex||999,t++,$("#"+j.themodal).append("<div class='"+J.overlayClass+" jqgrid-overlay confirm' style='z-index:"+t+";display:none;position:absolute;'>&#160;</div><div class='confirm ui-jqconfirm "+Z.content+"' style='z-index:"+(1+t)+"'>"+J.saveData+"<br/><br/>"+S+a+P+"</div>"),$("#sNew","#"+$.jgrid.jqID(j.themodal)).click(function(){return V(),$(m).data("disabled",!1),$(".confirm","#"+$.jgrid.jqID(j.themodal)).hide(),!1}),$("#nNew","#"+$.jgrid.jqID(j.themodal)).click(function(){return $(".confirm","#"+$.jgrid.jqID(j.themodal)).hide(),$(m).data("disabled",!1),setTimeout(function(){$(":input:visible",m)[0].focus()},0),!1}),$("#cNew","#"+$.jgrid.jqID(j.themodal)).click(function(){return $(".confirm","#"+$.jgrid.jqID(j.themodal)).hide(),$(m).data("disabled",!1),$.jgrid.hideModal("#"+$.jgrid.jqID(j.themodal),{gb:"#gbox_"+$.jgrid.jqID(g),jqm:J.jqModal,onClose:ee[p.p.id].onClose,removemodal:ee[p.p.id].removemodal,formprop:!ee[p.p.id].recreateForm,form:ee[p.p.id].form}),!1})),$(p).triggerHandler("jqGridAddEditInitializeForm",[$(m),h]),$.jgrid.isFunction(ee[p.p.id].onInitializeForm)&&ee[p.p.id].onInitializeForm.call(p,$(m),h),"_empty"!==Y&&ee[p.p.id].viewPagerButtons?$("#pData,#nData",s).show():$("#pData,#nData",s).hide(),$(p).triggerHandler("jqGridAddEditBeforeShowForm",[$(m),h]),$.jgrid.isFunction(ee[p.p.id].beforeShowForm)&&ee[p.p.id].beforeShowForm.call(p,$(m),h),X(),$("#"+$.jgrid.jqID(j.themodal)).data("onClose",ee[p.p.id].onClose),$.jgrid.viewModal("#"+$.jgrid.jqID(j.themodal),{gbox:"#gbox_"+$.jgrid.jqID(g),jqm:J.jqModal,overlay:J.overlay,modal:J.modal,overlayClass:J.overlayClass,focusField:J.focusField,onHide:function(e){var t=$.jgrid.floatNum($("#editmod"+g)[0].style.width),i="rtl"===$("#gbox_"+$.jgrid.jqID(g)).attr("dir"),a=$("#editmod"+g)[0].style.height,a=["100%","auto"].includes(a)?a:$.jgrid.floatNum(a,200);$(p).data("formProp",{top:$.jgrid.floatNum($(e.w).css("top")),left:i?$("#gbox_"+$.jgrid.jqID(g)).outerWidth()-t-parseFloat($(e.w).css("left"))+12:parseFloat($(e.w).css("left")),width:t,height:a,dataheight:$(m).height(),datawidth:$(m).width()}),e.w.remove(),e.o&&e.o.remove()}}),A||$("."+$.jgrid.jqID(J.overlayClass)).click(function(){return M()&&$.jgrid.hideModal("#"+$.jgrid.jqID(j.themodal),{gb:"#gbox_"+$.jgrid.jqID(g),jqm:J.jqModal,onClose:ee[p.p.id].onClose,removemodal:ee[p.p.id].removemodal,formprop:!ee[p.p.id].recreateForm,form:ee[p.p.id].form}),!1}),$(".fm-button","#"+$.jgrid.jqID(j.themodal)).hover(function(){$(this).addClass(Z.hover)},function(){$(this).removeClass(Z.hover)}),$("#sData",s).click(function(){return u={},$(".FormError",m).hide(),z(),"_empty"!==u[p.p.id+"_id"]&&!0===J.checkOnSubmit&&W(u,p.p.savedData)?($(m).data("disabled",!0),$(".confirm","#"+$.jgrid.jqID(j.themodal)).show()):V(),!1}),$("#cData",s).click(function(){return M()&&$.jgrid.hideModal("#"+$.jgrid.jqID(j.themodal),{gb:"#gbox_"+$.jgrid.jqID(g),jqm:J.jqModal,onClose:ee[p.p.id].onClose,removemodal:ee[p.p.id].removemodal,formprop:!ee[p.p.id].recreateForm,form:ee[p.p.id].form}),!1}),$(s).find("[data-index]").each(function(){var t=parseInt($(this).attr("data-index"),10);0<=t&&J.buttons[t].hasOwnProperty("click")&&$(this).on("click",function(e){J.buttons[t].click.call(p,$(m)[0],ee[p.p.id],e)})}),$("#nData",s).click(function(){if(!M())return!1;$(".FormError",m).hide();var e,t=Q();if(t[0]=parseInt(t[0],10),-1!==t[0]&&t[1][t[0]+1]){if($(p).triggerHandler("jqGridAddEditClickPgButtons",["next",$(m),t[1][t[0]]]),$.jgrid.isFunction(J.onclickPgButtons)&&void 0!==(e=J.onclickPgButtons.call(p,"next",$(m),t[1][t[0]]))&&!1===e)return!1;if($("#"+$.jgrid.jqID(t[1][t[0]+1])).hasClass(Z.disabled))return!1;H(t[1][t[0]+1],p,m),p.p.multiselect&&ee[p.p.id].editselected||$(p).jqGrid("setSelection",t[1][t[0]+1]),$(p).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",$(m),t[1][t[0]]]),$.jgrid.isFunction(J.afterclickPgButtons)&&J.afterclickPgButtons.call(p,"next",$(m),t[1][t[0]+1]),X(),L(t[0]+1,t)}return!1}),$("#pData",s).click(function(){if(!M())return!1;$(".FormError",m).hide();var e,t=Q();if(-1!==t[0]&&t[1][t[0]-1]){if($(p).triggerHandler("jqGridAddEditClickPgButtons",["prev",$(m),t[1][t[0]]]),$.jgrid.isFunction(J.onclickPgButtons)&&void 0!==(e=J.onclickPgButtons.call(p,"prev",$(m),t[1][t[0]]))&&!1===e)return!1;if($("#"+$.jgrid.jqID(t[1][t[0]-1])).hasClass(Z.disabled))return!1;H(t[1][t[0]-1],p,m),p.p.multiselect&&ee[p.p.id].editselected||$(p).jqGrid("setSelection",t[1][t[0]-1]),$(p).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",$(m),t[1][t[0]]]),$.jgrid.isFunction(J.afterclickPgButtons)&&J.afterclickPgButtons.call(p,"prev",$(m),t[1][t[0]-1]),X(),L(t[0]-1,t)}return!1}),$(p).triggerHandler("jqGridAddEditAfterShowForm",[$(m),h]),$.jgrid.isFunction(ee[p.p.id].afterShowForm)&&ee[p.p.id].afterShowForm.call(p,$(m),h),Q());L(l[0],l)}}function z(){var e,t,a={};for(e in $(f).find(".FormElement").each(function(){var e,t=$(".customelement",this);if(t.length){var t=t[0],i=$(t).attr("name");$.each(p.p.colModel,function(){if(this.name===i&&this.editoptions&&$.jgrid.isFunction(this.editoptions.custom_value)){try{if(u[i]=this.editoptions.custom_value.call(p,$("#"+$.jgrid.jqID(i),f),"get"),void 0===u[i])throw"e1"}catch(e){"e1"===e?$.jgrid.info_dialog(v.errcap,"function 'custom_value' "+ee[$(this)[0]].p.msg.novalue,ee[$(this)[0]].p.bClose,{styleUI:ee[$(this)[0]].p.styleUI}):$.jgrid.info_dialog(v.errcap,e.message,ee[$(this)[0]].p.bClose,{styleUI:ee[$(this)[0]].p.styleUI})}return!0}})}else{switch($(this).get(0).type){case"checkbox":$(this).is(":checked")?u[this.name]=$(this).val():(e=$(this).attr("offval"),u[this.name]=e);break;case"select-one":u[this.name]=$(this).val();break;case"select-multiple":u[this.name]=$(this).val(),u[this.name]=u[this.name]?u[this.name].join(","):"";break;case"radio":if(a.hasOwnProperty(this.name))return!0;a[this.name]=void 0===$(this).attr("offval")?"off":$(this).attr("offval");break;default:u[this.name]=$(this).val()}p.p.autoencode&&(u[this.name]=$.jgrid.htmlEncode(u[this.name]))}}),a)a.hasOwnProperty(e)&&(t=$('input[name="'+e+'"]:checked',f).val(),u[e]=void 0!==t?t:a[e],p.p.autoencode&&(u[e]=$.jgrid.htmlEncode(u[e])))}function H(i,a,d){var r,o,e,t,n,l=0,s=((ee[p.p.id].checkOnSubmit||ee[p.p.id].checkOnUpdate)&&(p.p.savedData={},p.p.savedData[a.p.id+"_id"]=i),a.p.colModel);if("_empty"===i)return $(s).each(function(){r=this.name,n=$.extend({},this.editoptions||{}),(e=$("#"+$.jgrid.jqID(r),d))&&e.length&&null!==e[0]&&(t="","custom"===this.edittype&&$.jgrid.isFunction(n.custom_value)?n.custom_value.call(p,$("#"+r,d),"set",t):n.defaultValue?(t=$.jgrid.isFunction(n.defaultValue)?n.defaultValue.call(p):n.defaultValue,"checkbox"===e[0].type?(n=t.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==n?(e[0].checked=!0,e[0].defaultChecked=!0,e[0].value=t):(e[0].checked=!1,e[0].defaultChecked=!1):e.val(t)):"checkbox"===e[0].type?(e[0].checked=!1,e[0].defaultChecked=!1,t=$(e).attr("offval")):e[0].type&&"select"===e[0].type.substr(0,6)?e[0].selectedIndex=0:e.val(t),!0!==ee[p.p.id].checkOnSubmit&&!ee[p.p.id].checkOnUpdate||(p.p.savedData[r]=t))}),void $("#id_g",d).val(i);var c=$(a).jqGrid("getInd",i,!0);c&&($('td[role="gridcell"]',c).each(function(t){if("cb"!==(r=s[t].name)&&"subgrid"!==r&&"rn"!==r&&!0===s[t].editable&&"sc"!==r){if(r===a.p.ExpandColumn&&!0===a.p.treeGrid)o=$(this).text();else try{o=$.unformat.call(a,$(this),{rowId:i,colModel:s[t]},t)}catch(e){o="textarea"===s[t].edittype?$(this).text():$(this).html()}switch(p.p.autoencode&&(o=$.jgrid.htmlDecode(o)),!0!==ee[p.p.id].checkOnSubmit&&!ee[p.p.id].checkOnUpdate||(p.p.savedData[r]=o),r=$.jgrid.jqID(r),s[t].edittype){case"select":var e=o.split(","),e=$.map(e,function(e){return $.jgrid.trim(e)});$("#"+r+" option",d).each(function(){!(s[t].editoptions.multiple||$.jgrid.trim(o)!==$.jgrid.trim($(this).text())&&e[0]!==$.jgrid.trim($(this).text())&&e[0]!==$.jgrid.trim($(this).val()))||s[t].editoptions.multiple&&(-1<$.inArray($.jgrid.trim($(this).text()),e)||-1<$.inArray($.jgrid.trim($(this).val()),e))?this.selected=!0:this.selected=!1}),!0!==ee[p.p.id].checkOnSubmit&&!ee[p.p.id].checkOnUpdate||(o=$("#"+r,d).val(),s[t].editoptions.multiple&&(o=o.join(",")),p.p.savedData[r]=o);break;case"checkbox":o=String(o),s[t].editoptions&&s[t].editoptions.value?s[t].editoptions.value.split(":")[0]===o?$("#"+r,d)[p.p.useProp?"prop":"attr"]({checked:!0,defaultChecked:!0}):$("#"+r,d)[p.p.useProp?"prop":"attr"]({checked:!1,defaultChecked:!1}):(o=o.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==o?($("#"+r,d)[p.p.useProp?"prop":"attr"]("checked",!0),$("#"+r,d)[p.p.useProp?"prop":"attr"]("defaultChecked",!0)):($("#"+r,d)[p.p.useProp?"prop":"attr"]("checked",!1),$("#"+r,d)[p.p.useProp?"prop":"attr"]("defaultChecked",!1)),!0!==ee[p.p.id].checkOnSubmit&&!ee[p.p.id].checkOnUpdate||(o=$("#"+r,d).is(":checked")?$("#"+r,d).val():$("#"+r,d).attr("offval"),p.p.savedData[r]=o);break;case"custom":try{if(!s[t].editoptions||!$.jgrid.isFunction(s[t].editoptions.custom_value))throw"e1";s[t].editoptions.custom_value.call(p,$("#"+r,d),"set",o)}catch(e){"e1"===e?$.jgrid.info_dialog(v.errcap,"function 'custom_value' "+ee[$(this)[0]].p.msg.nodefined,$.rp_ge[$(this)[0]].p.bClose,{styleUI:ee[$(this)[0]].p.styleUI}):$.jgrid.info_dialog(v.errcap,e.message,$.rp_ge[$(this)[0]].p.bClose,{styleUI:ee[$(this)[0]].p.styleUI})}break;default:("&nbsp;"===o||"&#160;"===o||1===o.length&&160===o.charCodeAt(0))&&(o=""),$("#"+r,d).val(o)}l++}}),0<l&&($("#id_g",f).val(i),!0!==ee[p.p.id].checkOnSubmit&&!ee[p.p.id].checkOnUpdate||(p.p.savedData[a.p.id+"_id"]=i)))}function V(){var a,d,r,e,t,o,i,n=[!0,"",""],l={},s=p.p.prmNames,c=$(p).triggerHandler("jqGridAddEditBeforeCheckValues",[u,$(m),h]);if(c&&"object"==typeof c&&(u=c),$.jgrid.isFunction(ee[p.p.id].beforeCheckValues)&&(c=ee[p.p.id].beforeCheckValues.call(p,u,$(m),h))&&"object"==typeof c&&(u=c),!ee[p.p.id].html5Check||$.jgrid.validateForm(b[0])){for(e in u)if(u.hasOwnProperty(e)&&!1===(n=$.jgrid.checkValues.call(p,u[e],e))[0])break;if($.each(p.p.colModel,function(e,t){t.editoptions&&!0===t.editoptions.NullIfEmpty&&u.hasOwnProperty(t.name)&&""===u[t.name]&&(u[t.name]="null")}),n[0]&&(void 0===(l=$(p).triggerHandler("jqGridAddEditClickSubmit",[ee[p.p.id],u,h]))&&$.jgrid.isFunction(ee[p.p.id].onclickSubmit)&&(l=ee[p.p.id].onclickSubmit.call(p,ee[p.p.id],u,h)||{}),(n=void 0===(n=$(p).triggerHandler("jqGridAddEditBeforeSubmit",[u,$(m),h]))?[!0,"",""]:n)[0]&&$.jgrid.isFunction(ee[p.p.id].beforeSubmit)&&(n=ee[p.p.id].beforeSubmit.call(p,u,$(m),h))),n[0]&&!ee[p.p.id].processing){if(ee[p.p.id].processing=!0,$("#sData",f+"_2").addClass(Z.active),c=ee[p.p.id].url||$(p).jqGrid("getGridParam","editurl"),r=s.oper,d="clientArray"===c?p.p.keyName:s.id,u[r]="_empty"===$.jgrid.trim(u[p.p.id+"_id"])?s.addoper:s.editoper,(u[r]!==s.addoper||void 0===u[d])&&(u[d]=u[p.p.id+"_id"]),delete u[p.p.id+"_id"],u=$.extend(u,ee[p.p.id].editData,l),!0===p.p.treeGrid)for(t in u[r]===s.addoper&&(o=$(p).jqGrid("getGridParam","selrow"),l="adjacency"===p.p.treeGridModel?p.p.treeReader.parent_id_field:"parent_id",u[l]=o),p.p.treeReader)p.p.treeReader.hasOwnProperty(t)&&(i=p.p.treeReader[t],!u.hasOwnProperty(i)||u[r]===s.addoper&&"parent_id_field"===t||delete u[i]);u[d]=$.jgrid.stripPref(p.p.idPrefix,u[d]);l=$.extend({url:c,type:ee[p.p.id].mtype,data:$.jgrid.isFunction(ee[p.p.id].serializeEditData)?ee[p.p.id].serializeEditData.call(p,u):u,complete:function(e,t){if($("#sData",f+"_2").removeClass(Z.active),u[d]=p.p.idPrefix+u[d],300<=e.status&&304!==e.status?(n[0]=!1,n[1]=$(p).triggerHandler("jqGridAddEditErrorTextFormat",[e,h]),$.jgrid.isFunction(ee[p.p.id].errorTextFormat)?n[1]=ee[p.p.id].errorTextFormat.call(p,e,h):n[1]=t+" Status: '"+e.statusText+"'. Error code: "+e.status):(n=void 0===(n=$(p).triggerHandler("jqGridAddEditAfterSubmit",[e,u,h]))?[!0,"",""]:n)[0]&&$.jgrid.isFunction(ee[p.p.id].afterSubmit)&&(n=ee[p.p.id].afterSubmit.call(p,e,u,h)),!1===n[0])$(".FormError",m).html(n[1]),$(".FormError",m).show();else if(p.p.autoencode&&$.each(u,function(e,t){u[e]=$.jgrid.htmlDecode(t)}),u[r]===s.addoper?(n[2]||(n[2]=$.jgrid.randId()),null==u[d]||u[d]===p.p.idPrefix+"_empty"||""===u[d]?u[d]=n[2]:n[2]=u[d],ee[p.p.id].reloadAfterSubmit?$(p).trigger("reloadGrid"):!0===p.p.treeGrid?$(p).jqGrid("addChildNode",n[2],o,u):$(p).jqGrid("addRowData",n[2],u,J.addedrow),ee[p.p.id].closeAfterAdd?(!0!==p.p.treeGrid&&$(p).jqGrid("setSelection",n[2]),$.jgrid.hideModal("#"+$.jgrid.jqID(j.themodal),{gb:"#gbox_"+$.jgrid.jqID(g),jqm:J.jqModal,onClose:ee[p.p.id].onClose,removemodal:ee[p.p.id].removemodal,formprop:!ee[p.p.id].recreateForm,form:ee[p.p.id].form})):ee[p.p.id].clearAfterAdd&&H("_empty",p,m)):(ee[p.p.id].reloadAfterSubmit?($(p).trigger("reloadGrid"),ee[p.p.id].closeAfterEdit||setTimeout(function(){$(p).jqGrid("setSelection",u[d])},1e3)):!0===p.p.treeGrid?$(p).jqGrid("setTreeRow",u[d],u):$(p).jqGrid("setRowData",u[d],u),ee[p.p.id].closeAfterEdit&&$.jgrid.hideModal("#"+$.jgrid.jqID(j.themodal),{gb:"#gbox_"+$.jgrid.jqID(g),jqm:J.jqModal,onClose:ee[p.p.id].onClose,removemodal:ee[p.p.id].removemodal,formprop:!ee[p.p.id].recreateForm,form:ee[p.p.id].form})),($.jgrid.isFunction(ee[p.p.id].afterComplete)||Object.prototype.hasOwnProperty.call($._data($(p)[0],"events"),"jqGridAddEditAfterComplete"))&&(a=e,setTimeout(function(){$(p).triggerHandler("jqGridAddEditAfterComplete",[a,u,$(m),h]);try{ee[p.p.id].afterComplete.call(p,a,u,$(m),h)}catch(e){}a=null},500)),(ee[p.p.id].checkOnSubmit||ee[p.p.id].checkOnUpdate)&&($(m).data("disabled",!1),"_empty"!==p.p.savedData[p.p.id+"_id"]))for(var i in p.p.savedData)p.p.savedData.hasOwnProperty(i)&&u[i]&&(p.p.savedData[i]=u[i]);ee[p.p.id].processing=!1;try{$(":input:visible",m)[0].focus()}catch(e){}}},$.jgrid.ajaxOptions,ee[p.p.id].ajaxEditOptions);l.url||ee[p.p.id].useDataProxy||($.jgrid.isFunction(p.p.dataProxy)?ee[p.p.id].useDataProxy=!0:(n[0]=!1,n[1]+=" "+v.nourl)),n[0]&&(ee[p.p.id].useDataProxy?!1===(c=void 0===(c=p.p.dataProxy.call(p,l,"set_"+p.p.id))?[!0,""]:c)[0]?(n[0]=!1,n[1]=c[1]||"Error deleting the selected row!"):(l.data.oper===s.addoper&&ee[p.p.id].closeAfterAdd&&$.jgrid.hideModal("#"+$.jgrid.jqID(j.themodal),{gb:"#gbox_"+$.jgrid.jqID(g),jqm:J.jqModal,onClose:ee[p.p.id].onClose,removemodal:ee[p.p.id].removemodal,formprop:!ee[p.p.id].recreateForm,form:ee[p.p.id].form}),l.data.oper===s.editoper&&ee[p.p.id].closeAfterEdit&&$.jgrid.hideModal("#"+$.jgrid.jqID(j.themodal),{gb:"#gbox_"+$.jgrid.jqID(g),jqm:J.jqModal,onClose:ee[p.p.id].onClose,removemodal:ee[p.p.id].removemodal,formprop:!ee[p.p.id].recreateForm,form:ee[p.p.id].form})):"clientArray"===l.url?(ee[p.p.id].reloadAfterSubmit=!1,u=l.data,l.complete({status:200,statusText:""},"")):$.ajax(l))}!1===n[0]&&($(m).scrollTop(0),$(".FormError",m).html(n[1]),$(".FormError",m).show())}}function W(e,t){var i,a=!1;if(!(a=!($.isPlainObject(e)&&$.isPlainObject(t)&&Object.getOwnPropertyNames(e).length===Object.getOwnPropertyNames(t).length)))for(i in t)if(t.hasOwnProperty(i)){if(!e.hasOwnProperty(i)){a=!0;break}if(e[i]!==t[i]){a=!0;break}}return a}function M(){var e=!0;return $(".FormError",m).hide(),ee[p.p.id].checkOnUpdate&&(u={},z(),W(u,p.p.savedData)&&($(m).data("disabled",!0),$(".confirm","#"+j.themodal).show(),e=!1)),e}function L(e,t){var i=t[1].length-1;0===e||void 0!==t[1][e-1]&&$("#"+$.jgrid.jqID(t[1][e-1])).hasClass(Z.disabled)?$("#pData",s).addClass(Z.disabled):$("#pData",s).removeClass(Z.disabled),e===i||void 0!==t[1][e+1]&&$("#"+$.jgrid.jqID(t[1][e+1])).hasClass(Z.disabled)?$("#nData",s).addClass(Z.disabled):$("#nData",s).removeClass(Z.disabled)}function Q(){var e=$(p).jqGrid("getDataIDs"),t=$("#id_g",f).val();if(p.p.multiselect&&ee[p.p.id].editselected){for(var i=[],a=0,d=e.length;a<d;a++)-1!==$.inArray(e[a],p.p.selarrrow)&&i.push(e[a]);return[$.inArray(t,i),i]}return[$.inArray(t,e),e]}function X(){if(ee[p.p.id].checkOnSubmit||ee[p.p.id].checkOnUpdate){var e,t,i=[],a={},i=$.map(p.p.savedData,function(e,t){return t});for(e in $(".FormElement",b).each(function(){if(""!==$.jgrid.trim(this.name)&&-1===i.indexOf(this.name)){var e=$(this).val(),t=$(this).get(0).type;if("checkbox"===t)$(this).is(":checked")||(e=$(this).attr("offval"));else if("select-multiple"===t)e=e.join(",");else if("radio"===t){if(a.hasOwnProperty(this.name))return!0;a[this.name]=void 0===$(this).attr("offval")?"off":$(this).attr("offval")}p.p.savedData[this.name]=e}}),a)a.hasOwnProperty(e)&&(t=$('input[name="'+e+'"]:checked',b).val(),p.p.savedData[e]=void 0!==t?t:a[e])}}})},viewGridRow:function(U,T){var e=$.jgrid.getRegional(this[0],"view"),t=this[0].p.styleUI,N=$.jgrid.styleUI[t].formedit,z=$.jgrid.styleUI[t].common;return T=$.extend(!0,{top:0,left:0,width:500,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"auto",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1,removemodal:!0,form:"view",buttons:[]},e,T||{}),ee[$(this)[0].p.id]=T,this.each(function(){var r=this;if(r.grid&&U){var a=r.p.id,d="ViewGrid_"+$.jgrid.jqID(a),n="ViewTbl_"+$.jgrid.jqID(a),i="ViewGrid_"+a,e="ViewTbl_"+a,t={themodal:"viewmod"+a,modalhead:"viewhd"+a,modalcontent:"viewcnt"+a,scrollelm:d},o=!0,l=1,s=0,c=(ee[r.p.id].styleUI=r.p.styleUI||"jQueryUI",T.recreateForm||$(r).data("viewProp")&&$.extend(ee[$(this)[0].p.id],$(r).data("viewProp")),isNaN(ee[$(this)[0].p.id].dataheight)?ee[$(this)[0].p.id].dataheight:ee[$(this)[0].p.id].dataheight+"px"),p=isNaN(ee[$(this)[0].p.id].datawidth)?ee[$(this)[0].p.id].datawidth:ee[$(this)[0].p.id].datawidth+"px",p=$("<form name='FormPost' id='"+i+"' class='FormGrid' style='width:"+p+";height:"+c+";'></form>"),u=$("<table id='"+e+"' class='EditTable ViewTable'><tbody></tbody></table>");if($(r.p.colModel).each(function(){var e=this.formoptions;l=Math.max(l,e&&e.colpos||0),s=Math.max(s,e&&e.rowpos||0)}),$(p).append(u),!1!==(o=(o=void 0===(o=$(r).triggerHandler("jqGridViewRowBeforeInitData",[p]))?!0:o)&&$.jgrid.isFunction(ee[r.p.id].beforeInitData)?ee[r.p.id].beforeInitData.call(r,p):o)){for(var h,g,m,f,j,v,b,w,c=U,D=r,y=u,q=l,x=0,_=[],A="<td class='CaptionTD form-view-label "+z.content+"' width='"+T.labelswidth+"'></td><td class='DataTD form-view-data ui-helper-reset "+z.content+"'></td>",I="",B="<td class='CaptionTD form-view-label "+z.content+"'></td><td class='DataTD form-view-data "+z.content+"'></td>",R=["integer","number","currency"],k=0,C=0,F=1;F<=q;F++)I+=1===F?A:B;$(D.p.colModel).each(function(){(g=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden)||"right"!==this.align||(this.formatter&&-1!==$.inArray(this.formatter,R)?k=Math.max(k,parseInt(this.width,10)):C=Math.max(C,parseInt(this.width,10)))}),v=0!==k?k:0!==C?C:0,j=$(D).jqGrid("getInd",c),$(D.p.colModel).each(function(e){var t,i,a,d;h=this.name,g=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden,f=g?"style='display:none'":"",w="boolean"!=typeof this.viewable||this.viewable,"cb"!==h&&"subgrid"!==h&&"rn"!==h&&w&&"sc"!==h&&(w=!1===j?"":h===D.p.ExpandColumn&&!0===D.p.treeGrid?$("td",D.rows[j]).eq(e).text():$("td",D.rows[j]).eq(e).html(),b="right"===this.align&&0!==v,t=$.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),i=parseInt(t.rowpos,10)||x+1,a=parseInt(2*(parseInt(t.colpos,10)||1),10),t.rowabove&&(d=$("<tr><td class='contentinfo' colspan='"+2*q+"'>"+t.rowcontent+"</td></tr>"),$(y).append(d),d[0].rp=i),0===(m=$(y).find("tr[rowpos="+i+"]")).length&&(m=$("<tr "+f+" rowpos='"+i+"'></tr>").addClass("FormData").attr("id","trv_"+h),$(m).append(I),$(y).append(m),m[0].rp=i),$("td",m[0]).eq(a-2).html("<b>"+(void 0===t.label?D.p.colNames[e]:t.label)+"</b>"),$("td",m[0]).eq(a-1).append("<span>"+w+"</span>").attr("id","v_"+h),b&&$("td",m[0]).eq(a-1).find("span").css({"text-align":"right",width:v+"px"}),_[x]=e,x++)}),0<x&&((c=$("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*q-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+c+"'/></td></tr>"))[0].rp=x+99,$(y).append(c));var G,e="rtl"===r.p.direction,o="<a id='"+(e?"nData":"pData")+"' class='fm-button "+z.button+"'><span class='"+z.icon_base+" "+N.icon_prev+"'></span></a>",c="<a id='"+(e?"pData":"nData")+"' class='fm-button "+z.button+"'><span class='"+z.icon_base+" "+N.icon_next+"'></span></a>",O="<a id='cData' class='fm-button "+z.button+"'>"+T.bClose+"</a>",O=Array.isArray(ee[r.p.id].buttons)?$.jgrid.buildButtons(ee[r.p.id].buttons,O,z):O,p=(0<s&&(G=[],$.each($(u)[0].rows,function(e,t){G[e]=t}),G.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),$.each(G,function(e,t){$("tbody",u).append(t)})),T.gbox="#gbox_"+$.jgrid.jqID(a),$("<div></div>").append(p).append("<table border='0' class='EditTable' id='"+n+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+T.labelswidth+"'>"+(e?c+o:o+c)+"</td><td class='EditButton'>"+O+"</td></tr></tbody></table>")),o=$(".ui-jqgrid").css("font-size")||"11px",c=($.jgrid.createModal(t,p,ee[$(this)[0].p.id],"#gview_"+$.jgrid.jqID(r.p.id),$("#gview_"+$.jgrid.jqID(r.p.id))[0],null,{"font-size":o}),e&&($("#pData, #nData","#"+n+"_2").css("float","right"),$(".EditButton","#"+n+"_2").css("text-align","left")),T.viewPagerButtons||$("#pData, #nData","#"+n+"_2").hide(),$("#"+t.themodal).keydown(function(e){return 27===e.which?(ee[r.p.id].closeOnEscape&&$.jgrid.hideModal("#"+$.jgrid.jqID(t.themodal),{gb:T.gbox,jqm:T.jqModal,onClose:T.onClose,removemodal:ee[r.p.id].removemodal,formprop:!ee[r.p.id].recreateForm,form:ee[r.p.id].form}),!1):!0===T.navkeys[0]?e.which===T.navkeys[1]?($("#pData","#"+n+"_2").trigger("click"),!1):e.which===T.navkeys[2]?($("#nData","#"+n+"_2").trigger("click"),!1):void 0:void 0}),T.closeicon=$.extend([!0,"left",N.icon_close],T.closeicon),!0===T.closeicon[0]&&$("#cData","#"+n+"_2").addClass("right"===T.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+z.icon_base+" "+T.closeicon[2]+"'></span>"),$(r).triggerHandler("jqGridViewRowBeforeShowForm",[$("#"+d)]),$.jgrid.isFunction(T.beforeShowForm)&&T.beforeShowForm.call(r,$("#"+d)),$.jgrid.viewModal("#"+$.jgrid.jqID(t.themodal),{gbox:"#gbox_"+$.jgrid.jqID(a),jqm:T.jqModal,overlay:T.overlay,modal:T.modal,onHide:function(e){var t="rtl"===$("#gbox_"+$.jgrid.jqID(a)).attr("dir"),i=parseFloat($("#viewmod"+a)[0].style.width);$(r).data("viewProp",{top:parseFloat($(e.w).css("top")),left:t?$("#gbox_"+$.jgrid.jqID(a)).outerWidth()-i-parseFloat($(e.w).css("left"))+12:parseFloat($(e.w).css("left")),width:$(e.w).width(),height:$(e.w).height(),dataheight:$("#"+d).height(),datawidth:$("#"+d).width()}),e.w.remove(),e.o&&e.o.remove()}}),$(".fm-button:not(."+z.disabled+")","#"+n+"_2").hover(function(){$(this).addClass(z.hover)},function(){$(this).removeClass(z.hover)}),S(),$("#cData","#"+n+"_2").click(function(){return $.jgrid.hideModal("#"+$.jgrid.jqID(t.themodal),{gb:"#gbox_"+$.jgrid.jqID(a),jqm:T.jqModal,onClose:T.onClose,removemodal:ee[r.p.id].removemodal,formprop:!ee[r.p.id].recreateForm,form:ee[r.p.id].form}),!1}),$("#"+n+"_2").find("[data-index]").each(function(){var t=parseInt($(this).attr("data-index"),10);0<=t&&T.buttons[t].hasOwnProperty("click")&&$(this).on("click",function(e){T.buttons[t].click.call(r,$("#"+i)[0],ee[r.p.id],e)})}),$("#nData","#"+n+"_2").click(function(){$("#FormError","#"+n).hide();var e=M();return e[0]=parseInt(e[0],10),-1!==e[0]&&e[1][e[0]+1]&&($(r).triggerHandler("jqGridViewRowClickPgButtons",["next",$("#"+d),e[1][e[0]]]),$.jgrid.isFunction(T.onclickPgButtons)&&T.onclickPgButtons.call(r,"next",$("#"+d),e[1][e[0]]),P(e[1][e[0]+1],r),r.p.multiselect&&ee[r.p.id].viewselected||$(r).jqGrid("setSelection",e[1][e[0]+1]),$(r).triggerHandler("jqGridViewRowAfterClickPgButtons",["next",$("#"+d),e[1][e[0]+1]]),$.jgrid.isFunction(T.afterclickPgButtons)&&T.afterclickPgButtons.call(r,"next",$("#"+d),e[1][e[0]+1]),E(e[0]+1,e)),S(),!1}),$("#pData","#"+n+"_2").click(function(){$("#FormError","#"+n).hide();var e=M();return-1!==e[0]&&e[1][e[0]-1]&&($(r).triggerHandler("jqGridViewRowClickPgButtons",["prev",$("#"+d),e[1][e[0]]]),$.jgrid.isFunction(T.onclickPgButtons)&&T.onclickPgButtons.call(r,"prev",$("#"+d),e[1][e[0]]),P(e[1][e[0]-1],r),r.p.multiselect&&ee[r.p.id].viewselected||$(r).jqGrid("setSelection",e[1][e[0]-1]),$(r).triggerHandler("jqGridViewRowAfterClickPgButtons",["prev",$("#"+d),e[1][e[0]-1]]),$.jgrid.isFunction(T.afterclickPgButtons)&&T.afterclickPgButtons.call(r,"prev",$("#"+d),e[1][e[0]-1]),E(e[0]-1,e)),S(),!1}),M());E(c[0],c)}}function S(){!0!==ee[r.p.id].closeOnEscape&&!0!==ee[r.p.id].navkeys[0]||setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(t.modalhead)).attr("tabindex","-1").focus()},0)}function P(e,t){var i,a,d,r=0,o=$(t).jqGrid("getInd",e,!0);o&&($("td",o).each(function(e){i=t.p.colModel[e].name,a=(!t.p.colModel[e].editrules||!0!==t.p.colModel[e].editrules.edithidden)&&!0===t.p.colModel[e].hidden,"cb"!==i&&"subgrid"!==i&&"rn"!==i&&"sc"!==i&&(d=i===t.p.ExpandColumn&&!0===t.p.treeGrid?$(this).text():$(this).html(),i=$.jgrid.jqID("v_"+i),$("#"+i+" span","#"+n).html(d),a&&$("#"+i,"#"+n).parents("tr").first().hide(),r++)}),0<r&&$("#id_g","#"+n).val(e))}function E(e,t){var i=t[1].length-1;0===e?$("#pData","#"+n+"_2").addClass(z.disabled):void 0!==t[1][e-1]&&$("#"+$.jgrid.jqID(t[1][e-1])).hasClass(z.disabled)?$("#pData",n+"_2").addClass(z.disabled):$("#pData","#"+n+"_2").removeClass(z.disabled),e===i?$("#nData","#"+n+"_2").addClass(z.disabled):void 0!==t[1][e+1]&&$("#"+$.jgrid.jqID(t[1][e+1])).hasClass(z.disabled)?$("#nData",n+"_2").addClass(z.disabled):$("#nData","#"+n+"_2").removeClass(z.disabled)}function M(){var e=$(r).jqGrid("getDataIDs"),t=$("#id_g","#"+n).val();if(r.p.multiselect&&ee[r.p.id].viewselected){for(var i=[],a=0,d=e.length;a<d;a++)-1!==$.inArray(e[a],r.p.selarrrow)&&i.push(e[a]);return[$.inArray(t,i),i]}return[$.inArray(t,e),e]}})},delGridRow:function(h,g){var e=$.jgrid.getRegional(this[0],"del"),t=this[0].p.styleUI,m=$.jgrid.styleUI[t].formedit,f=$.jgrid.styleUI[t].common;return g=$.extend(!0,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},e,g||{}),ee[$(this)[0].p.id]=g,this.each(function(){var o=this;if(o.grid&&h){var n,a,l,s=o.p.id,c={},e=!0,p="DelTbl_"+$.jgrid.jqID(s),i="DelTbl_"+s,u={themodal:"delmod"+s,modalhead:"delhd"+s,modalcontent:"delcnt"+s,scrollelm:p};if(ee[o.p.id].styleUI=o.p.styleUI||"jQueryUI",Array.isArray(h)&&(h=h.join()),void 0!==$("#"+$.jgrid.jqID(u.themodal))[0]){if(!1===(e=(e=void 0===(e=$(o).triggerHandler("jqGridDelRowBeforeInitData",[$("#"+p)]))?!0:e)&&$.jgrid.isFunction(ee[o.p.id].beforeInitData)?ee[o.p.id].beforeInitData.call(o,$("#"+p)):e))return;$("#DelData>td","#"+p).text(h),$("#DelError","#"+p).hide(),!0===ee[o.p.id].processing&&(ee[o.p.id].processing=!1,$("#dData","#"+p).removeClass(f.active)),$(o).triggerHandler("jqGridDelRowBeforeShowForm",[$("#"+p)]),$.jgrid.isFunction(ee[o.p.id].beforeShowForm)&&ee[o.p.id].beforeShowForm.call(o,$("#"+p)),$.jgrid.viewModal("#"+$.jgrid.jqID(u.themodal),{gbox:"#gbox_"+$.jgrid.jqID(s),jqm:ee[o.p.id].jqModal,overlay:ee[o.p.id].overlay,modal:ee[o.p.id].modal}),$(o).triggerHandler("jqGridDelRowAfterShowForm",[$("#"+p)]),$.jgrid.isFunction(ee[o.p.id].afterShowForm)&&ee[o.p.id].afterShowForm.call(o,$("#"+p))}else{var t=isNaN(ee[o.p.id].dataheight)?ee[o.p.id].dataheight:ee[o.p.id].dataheight+"px",d=isNaN(g.datawidth)?g.datawidth:g.datawidth+"px",d="<div id='"+i+"' class='formdata' style='width:"+d+";overflow:auto;position:relative;height:"+t+";'>",t=(d=(d=(d=d+"<table class='DelTable'><tbody>"+("<tr id='DelError' style='display:none'><td class='"+f.error+"'></td></tr>"))+("<tr id='DelData' style='display:none'><td >"+h+"</td></tr>"))+('<tr><td class="delmsg" style="white-space:pre;">'+ee[o.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>")+"</tbody></table></div>","<a id='dData' class='fm-button "+f.button+"'>"+g.bSubmit+"</a>"),r="<a id='eData' class='fm-button "+f.button+"'>"+g.bCancel+"</a>",t=Array.isArray(ee[o.p.id].buttons)?$.jgrid.buildButtons(ee[o.p.id].buttons,t+r,f):t+r,r=$(".ui-jqgrid").css("font-size")||"11px";if(d+="<table class='EditTable ui-common-table' id='"+p+"_2'><tbody><tr><td><hr class='"+f.content+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+t+"</td></tr></tbody></table>",g.gbox="#gbox_"+$.jgrid.jqID(s),$.jgrid.createModal(u,d,ee[o.p.id],"#gview_"+$.jgrid.jqID(o.p.id),$("#gview_"+$.jgrid.jqID(o.p.id))[0],null,{"font-size":r}),$(".fm-button","#"+p+"_2").hover(function(){$(this).addClass(f.hover)},function(){$(this).removeClass(f.hover)}),g.delicon=$.extend([!0,"left",m.icon_del],ee[o.p.id].delicon),g.cancelicon=$.extend([!0,"left",m.icon_cancel],ee[o.p.id].cancelicon),!0===g.delicon[0]&&$("#dData","#"+p+"_2").addClass("right"===g.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+f.icon_base+" "+g.delicon[2]+"'></span>"),!0===g.cancelicon[0]&&$("#eData","#"+p+"_2").addClass("right"===g.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+f.icon_base+" "+g.cancelicon[2]+"'></span>"),$("#dData","#"+p+"_2").click(function(){var e,d=[!0,""],r=$("#DelData>td","#"+p).text();if(c={},void 0===(c=$(o).triggerHandler("jqGridDelRowClickSubmit",[ee[o.p.id],r]))&&$.jgrid.isFunction(ee[o.p.id].onclickSubmit)&&(c=ee[o.p.id].onclickSubmit.call(o,ee[o.p.id],r)||{}),(d=(d=void 0===(d=$(o).triggerHandler("jqGridDelRowBeforeSubmit",[r]))?[!0,"",""]:d)[0]&&$.jgrid.isFunction(ee[o.p.id].beforeSubmit)?ee[o.p.id].beforeSubmit.call(o,r):d)[0]&&!ee[o.p.id].processing){if(ee[o.p.id].processing=!0,a=o.p.prmNames,n=$.extend({},ee[o.p.id].delData,c),l=a.oper,n[l]=a.deloper,l=a.id,!(r=String(r).split(",")).length)return!1;for(e in r)r.hasOwnProperty(e)&&(r[e]=$.jgrid.stripPref(o.p.idPrefix,r[e]));n[l]=r.join(),$(this).addClass(f.active);var t,i=$.extend({url:ee[o.p.id].url||$(o).jqGrid("getGridParam","editurl"),type:ee[o.p.id].mtype,data:$.jgrid.isFunction(ee[o.p.id].serializeDelData)?ee[o.p.id].serializeDelData.call(o,n):n,complete:function(e,t){var i,a;if($("#dData","#"+p+"_2").removeClass(f.active),300<=e.status&&304!==e.status?(d[0]=!1,d[1]=$(o).triggerHandler("jqGridDelRowErrorTextFormat",[e]),$.jgrid.isFunction(ee[o.p.id].errorTextFormat)&&(d[1]=ee[o.p.id].errorTextFormat.call(o,e)),void 0===d[1]&&(d[1]=t+" Status: '"+e.statusText+"'. Error code: "+e.status)):(d=void 0===(d=$(o).triggerHandler("jqGridDelRowAfterSubmit",[e,n]))?[!0,"",""]:d)[0]&&$.jgrid.isFunction(ee[o.p.id].afterSubmit)&&(d=ee[o.p.id].afterSubmit.call(o,e,n)),!1===d[0])$("#DelError>td","#"+p).html(d[1]),$("#DelError","#"+p).show();else{if(ee[o.p.id].reloadAfterSubmit&&"local"!==o.p.datatype)$(o).trigger("reloadGrid");else{if(!0===o.p.treeGrid)try{$(o).jqGrid("delTreeNode",o.p.idPrefix+r[0])}catch(e){}else for(i=0;i<r.length;i++)$(o).jqGrid("delRowData",o.p.idPrefix+r[i]);o.p.selrow=null,o.p.selarrrow=[]}($.jgrid.isFunction(ee[o.p.id].afterComplete)||Object.prototype.hasOwnProperty.call($._data($(o)[0],"events"),"jqGridDelRowAfterComplete"))&&(a=e,setTimeout(function(){$(o).triggerHandler("jqGridDelRowAfterComplete",[a,n]);try{ee[o.p.id].afterComplete.call(o,a,n)}catch(e){}},500))}ee[o.p.id].processing=!1,d[0]&&$.jgrid.hideModal("#"+$.jgrid.jqID(u.themodal),{gb:"#gbox_"+$.jgrid.jqID(s),jqm:g.jqModal,onClose:ee[o.p.id].onClose})}},$.jgrid.ajaxOptions,ee[o.p.id].ajaxDelOptions);i.url||ee[o.p.id].useDataProxy||($.jgrid.isFunction(o.p.dataProxy)?ee[o.p.id].useDataProxy=!0:(d[0]=!1,d[1]+=" "+$.jgrid.getRegional(o,"errors.nourl"))),d[0]&&(ee[o.p.id].useDataProxy?!1===(t=void 0===(t=o.p.dataProxy.call(o,i,"del_"+o.p.id))?[!0,""]:t)[0]?(d[0]=!1,d[1]=t[1]||"Error deleting the selected row!"):$.jgrid.hideModal("#"+$.jgrid.jqID(u.themodal),{gb:"#gbox_"+$.jgrid.jqID(s),jqm:g.jqModal,onClose:ee[o.p.id].onClose}):"clientArray"===i.url?(n=i.data,i.complete({status:200,statusText:""},"")):$.ajax(i))}return!1===d[0]&&($("#DelError>td","#"+p).html(d[1]),$("#DelError","#"+p).show()),!1}),$("#eData","#"+p+"_2").click(function(){return $.jgrid.hideModal("#"+$.jgrid.jqID(u.themodal),{gb:"#gbox_"+$.jgrid.jqID(s),jqm:ee[o.p.id].jqModal,onClose:ee[o.p.id].onClose}),!1}),$("#"+p+"_2").find("[data-index]").each(function(){var t=parseInt($(this).attr("data-index"),10);0<=t&&g.buttons[t].hasOwnProperty("click")&&$(this).on("click",function(e){g.buttons[t].click.call(o,$("#"+i)[0],ee[o.p.id],e)})}),!1===(e=(e=void 0===(e=$(o).triggerHandler("jqGridDelRowBeforeInitData",[$("#"+p)]))?!0:e)&&$.jgrid.isFunction(ee[o.p.id].beforeInitData)?ee[o.p.id].beforeInitData.call(o,$("#"+p)):e))return;$(o).triggerHandler("jqGridDelRowBeforeShowForm",[$("#"+p)]),$.jgrid.isFunction(ee[o.p.id].beforeShowForm)&&ee[o.p.id].beforeShowForm.call(o,$("#"+p)),$.jgrid.viewModal("#"+$.jgrid.jqID(u.themodal),{gbox:"#gbox_"+$.jgrid.jqID(s),jqm:ee[o.p.id].jqModal,overlay:ee[o.p.id].overlay,modal:ee[o.p.id].modal}),$(o).triggerHandler("jqGridDelRowAfterShowForm",[$("#"+p)]),$.jgrid.isFunction(ee[o.p.id].afterShowForm)&&ee[o.p.id].afterShowForm.call(o,$("#"+p))}!0===ee[o.p.id].closeOnEscape&&setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(u.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(g,m,f,j,v,b,w){var D=$.jgrid.getRegional(this[0],"nav"),y=this[0].p.styleUI,e=$.jgrid.styleUI[y].navigator,q=$.jgrid.styleUI[y].common;return m=$.extend({edit:!0,editicon:e.icon_edit_nav,add:!0,addicon:e.icon_add_nav,del:!0,delicon:e.icon_del_nav,search:!0,searchicon:e.icon_search_nav,refresh:!0,refreshicon:e.icon_refresh_nav,refreshstate:"firstpage",view:!1,viewicon:e.icon_view_nav,position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null,dropmenu:!1,navButtonText:""},D,m||{}),this.each(function(){if(!this.p.navGrid){var t,i={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},a=this;if(a.grid&&"string"==typeof g){$(a).data("navGrid")||$(a).data("navGrid",m),t=$(a).data("navGrid"),a.p.force_regional&&(t=$.extend(t,D)),void 0===$("#"+i.themodal)[0]&&(t.alerttop||t.alertleft||((d=$.jgrid.findPos(this))[0]=Math.round(d[0]),d[1]=Math.round(d[1]),0===(e=isNaN(this.p.height)?$(a.grid.bDiv).height():this.p.height)&&(e=200),t.alertleft=d[0]+this.p.width/2-parseInt(t.alertwidth,10)/2,t.alerttop=d[1]+e/2-25),d=$(".ui-jqgrid").css("font-size")||"11px",$.jgrid.createModal(i,"<div>"+t.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+$.jgrid.jqID(a.p.id),jqModal:!0,drag:!0,resize:!0,caption:t.alertcap,top:t.alerttop,left:t.alertleft,width:t.alertwidth,height:t.alertheight,closeOnEscape:t.closeOnEscape,zIndex:t.alertzIndex,styleUI:a.p.styleUI},"#gview_"+$.jgrid.jqID(a.p.id),$("#gbox_"+$.jgrid.jqID(a.p.id))[0],!0,{"font-size":d}));var e,d,r,o=1,n=function(){$(this).hasClass(q.disabled)||$(this).addClass(q.hover)},l=function(){$(this).removeClass(q.hover)};for(t.cloneToTop&&a.p.toppager&&(o=2),r=0;r<o;r++){var s,c,p,u=$("<table class='ui-pg-table navtable ui-common-table'><tbody><tr></tr></tbody></table>"),h="<td class='ui-pg-button "+q.disabled+"' style='width:4px;'><span class='ui-separator'></span></td>";0===r?(0===(c=g).indexOf("#")&&(c=c.substring(1),c="#"+$.jgrid.jqID(c)),p=a.p.id,c===a.p.toppager&&(p+="_top",o=1)):(c=a.p.toppager,p=a.p.id+"_top"),"rtl"===a.p.direction&&$(u).attr("dir","rtl").css("float","right"),j=j||{},t.add&&(s=$("<td class='ui-pg-button "+q.cornerall+"'></td>"),$(s).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+t.addicon+"'></span>"+t.addtext+"</div>"),$("tr",u).append(s),$(s,u).attr({title:t.addtitle||"",id:j.id||"add_"+p}).click(function(){return $(this).hasClass(q.disabled)||($.jgrid.setSelNavIndex(a,this),$.jgrid.isFunction(t.addfunc)?t.addfunc.call(a):$(a).jqGrid("editGridRow","new",j)),!1}).hover(n,l),s=null),f=f||{},t.edit&&(s=$("<td class='ui-pg-button "+q.cornerall+"'></td>"),$(s).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+t.editicon+"'></span>"+t.edittext+"</div>"),$("tr",u).append(s),$(s,u).attr({title:t.edittitle||"",id:f.id||"edit_"+p}).click(function(){var e;return $(this).hasClass(q.disabled)||((e=a.p.selrow)?($.jgrid.setSelNavIndex(a,this),$.jgrid.isFunction(t.editfunc)?t.editfunc.call(a,e):$(a).jqGrid("editGridRow",e,f)):($.jgrid.viewModal("#"+i.themodal,{gbox:"#gbox_"+$.jgrid.jqID(a.p.id),jqm:!0}),$("#jqg_alrt").focus())),!1}).hover(n,l),s=null),w=w||{},t.view&&(s=$("<td class='ui-pg-button "+q.cornerall+"'></td>"),$(s).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+t.viewicon+"'></span>"+t.viewtext+"</div>"),$("tr",u).append(s),$(s,u).attr({title:t.viewtitle||"",id:w.id||"view_"+p}).click(function(){var e;return $(this).hasClass(q.disabled)||((e=a.p.selrow)?($.jgrid.setSelNavIndex(a,this),$.jgrid.isFunction(t.viewfunc)?t.viewfunc.call(a,e):$(a).jqGrid("viewGridRow",e,w)):($.jgrid.viewModal("#"+i.themodal,{gbox:"#gbox_"+$.jgrid.jqID(a.p.id),jqm:!0}),$("#jqg_alrt").focus())),!1}).hover(n,l),s=null),v=v||{},t.del&&(s=$("<td class='ui-pg-button "+q.cornerall+"'></td>"),$(s).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+t.delicon+"'></span>"+t.deltext+"</div>"),$("tr",u).append(s),$(s,u).attr({title:t.deltitle||"",id:v.id||"del_"+p}).click(function(){var e;return $(this).hasClass(q.disabled)||(a.p.multiselect?0===(e=a.p.selarrrow).length&&(e=null):e=a.p.selrow,e?($.jgrid.setSelNavIndex(a,this),$.jgrid.isFunction(t.delfunc)?t.delfunc.call(a,e):$(a).jqGrid("delGridRow",e,v)):($.jgrid.viewModal("#"+i.themodal,{gbox:"#gbox_"+$.jgrid.jqID(a.p.id),jqm:!0}),$("#jqg_alrt").focus())),!1}).hover(n,l),s=null),(t.add||t.edit||t.del||t.view)&&$("tr",u).append(h),b=b||{},t.search&&(s=$("<td class='ui-pg-button "+q.cornerall+"'></td>"),$(s).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+t.searchicon+"'></span>"+t.searchtext+"</div>"),$("tr",u).append(s),$(s,u).attr({title:t.searchtitle||"",id:b.id||"search_"+p}).click(function(){return $(this).hasClass(q.disabled)||($.jgrid.setSelNavIndex(a,this),$.jgrid.isFunction(t.searchfunc)?t.searchfunc.call(a,b):$(a).jqGrid("searchGrid",b)),!1}).hover(n,l),b.showOnLoad&&!0===b.showOnLoad&&$(s,u).click(),s=null),t.refresh&&(s=$("<td class='ui-pg-button "+q.cornerall+"'></td>"),$(s).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+t.refreshicon+"'></span>"+t.refreshtext+"</div>"),$("tr",u).append(s),$(s,u).attr({title:t.refreshtitle||"",id:"refresh_"+p}).click(function(){if(!$(this).hasClass(q.disabled)){$.jgrid.isFunction(t.beforeRefresh)&&t.beforeRefresh.call(a),a.p.search=!1,a.p.resetsearch=!0;try{if("currentfilter"!==t.refreshstate){var e=a.p.id;a.p.postData.filters="";try{$("#fbox_"+$.jgrid.jqID(e)).jqFilter("resetFilter")}catch(e){}$.jgrid.isFunction(a.clearToolbar)&&a.clearToolbar.call(a,!1)}}catch(e){}switch(t.refreshstate){case"firstpage":$(a).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":$(a).trigger("reloadGrid",[{current:!0}])}$.jgrid.isFunction(t.afterRefresh)&&t.afterRefresh.call(a),$.jgrid.setSelNavIndex(a,this)}return!1}).hover(n,l),s=null),h=$(".ui-jqgrid").css("font-size")||"11px",$("body").append("<div id='testpg2' class='ui-jqgrid "+$.jgrid.styleUI[y].base.entrieBox+"' style='font-size:"+h+";visibility:hidden;' ></div>"),h=$(u).clone().appendTo("#testpg2").width(),$("#testpg2").remove(),a.p._nvtd&&(t.dropmenu?(u=null,$(a).jqGrid("_buildNavMenu",c,p,m,f,j,v,b,w)):h>a.p._nvtd[0]?(a.p.responsive?(u=null,$(a).jqGrid("_buildNavMenu",c,p,m,f,j,v,b,w)):$(c+"_"+t.position,c).append(u).width(h),a.p._nvtd[0]=h):$(c+"_"+t.position,c).append(u),a.p._nvtd[1]=h),a.p.navGrid=!0}a.p.storeNavOptions&&(a.p.navOptions=t,a.p.editOptions=f,a.p.addOptions=j,a.p.delOptions=v,a.p.searchOptions=b,a.p.viewOptions=w,a.p.navButtons=[])}}})},navButtonAdd:function(l,s){var c=this[0].p.styleUI,e=$.jgrid.styleUI[c].navigator;return s=$.extend({caption:"newButton",title:"",buttonicon:e.icon_newbutton_nav,onClickButton:null,position:"last",cursor:"pointer",internal:!1},s||{}),this.each(function(){var t,i,e,a,d,r,o,n;this.grid&&"string"==typeof l&&(0===l.indexOf("#")&&(l=l.substring(1)),l="#"+$.jgrid.jqID(l),n=$(".navtable",l)[0],i=$.jgrid.styleUI[c].common.disabled,e=$.jgrid.styleUI[c].common.hover,a=$.jgrid.styleUI[c].common.cornerall,r=$.jgrid.styleUI[c].common.icon_base,(t=this).p.storeNavOptions&&!s.internal&&t.p.navButtons.push([l,s]),n?s.id&&void 0!==$("#"+$.jgrid.jqID(s.id),n)[0]||(o=$("<td></td>"),"NONE"===s.buttonicon.toString().toUpperCase()?$(o).addClass("ui-pg-button "+a).append("<div class='ui-pg-div'>"+s.caption+"</div>"):$(o).addClass("ui-pg-button "+a).append("<div class='ui-pg-div'><span class='"+r+" "+s.buttonicon+"'></span>"+s.caption+"</div>"),s.id&&$(o).attr("id",s.id),"first"!==s.position||0===n.rows[0].cells.length?$("tr",n).append(o):$("tr td",n).eq(0).before(o),$(o,n).attr("title",s.title||"").click(function(e){return $(this).hasClass(i)||($.jgrid.setSelNavIndex(t,this),$.jgrid.isFunction(s.onClickButton)&&s.onClickButton.call(t,e)),!1}).hover(function(){$(this).hasClass(i)||$(this).addClass(e)},function(){$(this).removeClass(e)})):(n=$(".dropdownmenu",l)[0])&&(d=$(n).val(),r=s.id||$.jgrid.randId(),o=$('<li class="ui-menu-item" role="presentation"><a class="'+a+' g-menu-item" tabindex="0" role="menuitem" id="'+r+'">'+(s.caption||s.title)+"</a></li>"),d&&("first"===s.position?$("#"+d).prepend(o):$("#"+d).append(o),$(o).on("click",function(e){return $(this).hasClass(i)||($("#"+d).hide(),$.jgrid.isFunction(s.onClickButton)&&s.onClickButton.call(t,e)),!1}).find("a").hover(function(){$(this).hasClass(i)||$(this).addClass(e)},function(){$(this).removeClass(e)}))))})},navSeparatorAdd:function(i,a){var e=this[0].p.styleUI,d=$.jgrid.styleUI[e].common;return a=$.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},a||{}),this.each(function(){var e,t;this.grid&&("string"==typeof i&&0!==i.indexOf("#")&&(i="#"+$.jgrid.jqID(i)),t=$(".navtable",i)[0],this.p.storeNavOptions&&this.p.navButtons.push([i,a]),t?(e="<td class='ui-pg-button "+d.disabled+"' style='width:4px;'><span class='"+a.sepclass+"'></span>"+a.sepcontent+"</td>","first"!==a.position||0===t.rows[0].cells.length?$("tr",t).append(e):$("tr td",t).eq(0).before(e)):(t=$(".dropdownmenu",i)[0],e="<li class='ui-menu-item "+d.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>",t&&(t=$(t).val())&&("first"===a.position?$("#"+t).prepend(e):$("#"+t).append(e))))})},_buildNavMenu:function(c,p,u,h,g,m,f,j){return this.each(function(){var e,t,i,a=this,d=$.jgrid.getRegional(a,"nav"),r=a.p.styleUI,o=($.jgrid.styleUI[r].navigator,$.jgrid.styleUI[r].filter),n=$.jgrid.styleUI[r].common,l="form_menu_"+$.jgrid.randId(),r=u.navButtonText||d.selectcaption||"Actions",d="<button class='dropdownmenu "+n.button+"' value='"+l+"'>"+r+"</button>",s=($(c+"_"+u.position,c).append(d),{themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id});r=$(".ui-jqgrid").css("font-size")||"11px",i=$('<ul id="'+l+'" class="ui-nav-menu modal-content" role="menu" tabindex="0" style="display:none;font-size:'+r+'"></ul>'),u.add&&(e=(g=g||{}).id||"add_"+p,t=$('<li class="ui-menu-item" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+e+'">'+(u.addtext||u.addtitle)+"</a></li>").click(function(){return $(this).hasClass(n.disabled)||($.jgrid.isFunction(u.addfunc)?u.addfunc.call(a):$(a).jqGrid("editGridRow","new",g),$(i).hide()),!1}),$(i).append(t)),u.edit&&(e=(h=h||{}).id||"edit_"+p,t=$('<li class="ui-menu-item" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+e+'">'+(u.edittext||u.edittitle)+"</a></li>").click(function(){var e;return $(this).hasClass(n.disabled)||((e=a.p.selrow)?$.jgrid.isFunction(u.editfunc)?u.editfunc.call(a,e):$(a).jqGrid("editGridRow",e,h):($.jgrid.viewModal("#"+s.themodal,{gbox:"#gbox_"+$.jgrid.jqID(a.p.id),jqm:!0}),$("#jqg_alrt").focus()),$(i).hide()),!1}),$(i).append(t)),u.view&&(e=(j=j||{}).id||"view_"+p,t=$('<li class="ui-menu-item" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+e+'">'+(u.viewtext||u.viewtitle)+"</a></li>").click(function(){var e;return $(this).hasClass(n.disabled)||((e=a.p.selrow)?$.jgrid.isFunction(u.editfunc)?u.viewfunc.call(a,e):$(a).jqGrid("viewGridRow",e,j):($.jgrid.viewModal("#"+s.themodal,{gbox:"#gbox_"+$.jgrid.jqID(a.p.id),jqm:!0}),$("#jqg_alrt").focus()),$(i).hide()),!1}),$(i).append(t)),u.del&&(e=(m=m||{}).id||"del_"+p,t=$('<li class="ui-menu-item" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+e+'">'+(u.deltext||u.deltitle)+"</a></li>").click(function(){var e;return $(this).hasClass(n.disabled)||(a.p.multiselect?0===(e=a.p.selarrrow).length&&(e=null):e=a.p.selrow,e?$.jgrid.isFunction(u.delfunc)?u.delfunc.call(a,e):$(a).jqGrid("delGridRow",e,m):($.jgrid.viewModal("#"+s.themodal,{gbox:"#gbox_"+$.jgrid.jqID(a.p.id),jqm:!0}),$("#jqg_alrt").focus()),$(i).hide()),!1}),$(i).append(t)),(u.add||u.edit||u.del||u.view)&&$(i).append("<li class='ui-menu-item "+n.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>"),u.search&&(e=(f=f||{}).id||"search_"+p,t=$('<li class="ui-menu-item" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+e+'">'+(u.searchtext||u.searchtitle)+"</a></li>").click(function(){return $(this).hasClass(n.disabled)||($.jgrid.isFunction(u.searchfunc)?u.searchfunc.call(a,f):$(a).jqGrid("searchGrid",f),$(i).hide()),!1}),$(i).append(t),f.showOnLoad&&!0===f.showOnLoad&&$(t).click()),u.refresh&&(e=f.id||"search_"+p,t=$('<li class="ui-menu-item" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+e+'">'+(u.refreshtext||u.refreshtitle)+"</a></li>").click(function(){if(!$(this).hasClass(n.disabled)){$.jgrid.isFunction(u.beforeRefresh)&&u.beforeRefresh.call(a),a.p.search=!1,a.p.resetsearch=!0;try{if("currentfilter"!==u.refreshstate){var e=a.p.id;a.p.postData.filters="";try{$("#fbox_"+$.jgrid.jqID(e)).jqFilter("resetFilter")}catch(e){}$.jgrid.isFunction(a.clearToolbar)&&a.clearToolbar.call(a,!1)}}catch(e){}switch(u.refreshstate){case"firstpage":$(a).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":$(a).trigger("reloadGrid",[{current:!0}])}$.jgrid.isFunction(u.afterRefresh)&&u.afterRefresh.call(a),$(i).hide()}return!1}),$(i).append(t)),$(i).hide(),$("body").append(i),$("#"+l).addClass("ui-menu "+o.menu_widget),$("#"+l+" > li > a").hover(function(){$(this).addClass(n.hover)},function(){$(this).removeClass(n.hover)}),$(".dropdownmenu",c+"_"+u.position).on("click",function(e){var t=$(this).offset(),i=t.left,t=parseInt(t.top),a=$(this).val();$("#"+a).show().css({top:t-($("#"+a).height()+10)+"px",left:i+"px"}),e.stopPropagation()}),$("body").on("click",function(e){$(e.target).hasClass("dropdownmenu")||$("#"+l).hide()})})},GridToForm:function(a,d){return this.each(function(){var e,t=this;if(t.grid){var i=$(t).jqGrid("getRowData",a);if(i)for(e in i)i.hasOwnProperty(e)&&($("[name="+$.jgrid.jqID(e)+"]",d).is("input:radio")||$("[name="+$.jgrid.jqID(e)+"]",d).is("input:checkbox")?$("[name="+$.jgrid.jqID(e)+"]",d).each(function(){$(this).val()==i[e]?$(this)[t.p.useProp?"prop":"attr"]("checked",!0):$(this)[t.p.useProp?"prop":"attr"]("checked",!1)}):$("[name="+$.jgrid.jqID(e)+"]",d).val(i[e]))}})},FormToGrid:function(t,a,d,r){return this.each(function(){var e,i;this.grid&&(d=d||"set",r=r||"first",e=$(a).serializeArray(),i={},$.each(e,function(e,t){i[t.name]=t.value}),"add"===d?$(this).jqGrid("addRowData",t,i,r):"set"===d&&$(this).jqGrid("setRowData",t,i))})}})});